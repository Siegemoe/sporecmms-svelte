import{s as se,n as G}from"../chunks/scheduler.1dbefa40.js";import{S as ae,i as re,s as A,e as x,m as ie,d as p,f as T,c as k,a as y,k as O,l as u,g as S,h as f,u as F,t as L,b as N,j as H}from"../chunks/index.316c407f.js";import{e as J,u as oe,d as ne}from"../chunks/each.5b08259c.js";function K(s,e,t){const l=s.slice();return l[4]=e[t],l}function ce(s){let e,t='<div class="text-5xl mb-4">ðŸ“œ</div> <h3 class="text-xl font-bold text-spore-dark mb-2">No activity yet</h3> <p class="text-spore-steel">Actions will be recorded here as users make changes</p>';return{c(){e=x("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-7g3wy2"&&(e.innerHTML=t),this.h()},h(){u(e,"class","text-center py-16 bg-spore-white rounded-xl")},m(l,a){S(l,e,a)},p:G,d(l){l&&p(e)}}}function de(s){let e,t,l,a,i='<tr><th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">When</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Who</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Action</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Details</th></tr>',g,h,c=[],r=new Map,o,d,v=J(s[2]);const w=n=>n[4].id;for(let n=0;n<v.length;n+=1){let m=K(s,v,n),E=w(m);r.set(E,c[n]=Q(E,m))}let _=s[0]>1&&X(s);return{c(){e=x("div"),t=x("div"),l=x("table"),a=x("thead"),a.innerHTML=i,g=A(),h=x("tbody");for(let n=0;n<c.length;n+=1)c[n].c();o=A(),_&&_.c(),d=F(),this.h()},l(n){e=k(n,"DIV",{class:!0});var m=y(e);t=k(m,"DIV",{class:!0});var E=y(t);l=k(E,"TABLE",{class:!0});var M=y(l);a=k(M,"THEAD",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-jysngp"&&(a.innerHTML=i),g=T(M),h=k(M,"TBODY",{class:!0});var D=y(h);for(let C=0;C<c.length;C+=1)c[C].l(D);D.forEach(p),M.forEach(p),E.forEach(p),m.forEach(p),o=T(n),_&&_.l(n),d=F(),this.h()},h(){u(a,"class","bg-spore-dark"),u(h,"class","divide-y divide-spore-cream/50"),u(l,"class","min-w-full"),u(t,"class","overflow-x-auto"),u(e,"class","bg-spore-white rounded-xl overflow-hidden")},m(n,m){S(n,e,m),f(e,t),f(t,l),f(l,a),f(l,g),f(l,h);for(let E=0;E<c.length;E+=1)c[E]&&c[E].m(h,null);S(n,o,m),_&&_.m(n,m),S(n,d,m)},p(n,m){m&4&&(v=J(n[2]),c=oe(c,m,w,1,n,v,r,h,ne,Q,null,K)),n[0]>1?_?_.p(n,m):(_=X(n),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(n){n&&(p(e),p(o),p(d));for(let m=0;m<c.length;m+=1)c[m].d();_&&_.d(n)}}}function Q(s,e){let t,l,a,i=new Date(e[4].createdAt).toLocaleString()+"",g,h,c,r,o=ee(e[4].user)+"",d,v,w,_,n=te(e[4].action)+"",m,E,M,D,C=V(e[4].details)+"",I,j,B;return{key:s,first:null,c(){t=x("tr"),l=x("td"),a=x("time"),g=L(i),c=A(),r=x("td"),d=L(o),v=A(),w=x("td"),_=x("span"),m=L(n),M=A(),D=x("td"),I=L(C),B=A(),this.h()},l(P){t=k(P,"TR",{class:!0});var b=y(t);l=k(b,"TD",{class:!0});var R=y(l);a=k(R,"TIME",{datetime:!0});var U=y(a);g=N(U,i),U.forEach(p),R.forEach(p),c=T(b),r=k(b,"TD",{class:!0});var W=y(r);d=N(W,o),W.forEach(p),v=T(b),w=k(b,"TD",{class:!0});var q=y(w);_=k(q,"SPAN",{class:!0});var z=y(_);m=N(z,n),z.forEach(p),q.forEach(p),M=T(b),D=k(b,"TD",{class:!0,title:!0});var Y=y(D);I=N(Y,C),Y.forEach(p),B=T(b),b.forEach(p),this.h()},h(){u(a,"datetime",h=e[4].createdAt.toString()),u(l,"class","px-6 py-4 whitespace-nowrap text-sm text-spore-steel"),u(r,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-spore-dark"),u(_,"class",E="text-sm font-bold "+le(e[4].action)),u(w,"class","px-6 py-4 whitespace-nowrap"),u(D,"class","px-6 py-4 text-sm text-spore-steel max-w-md truncate"),u(D,"title",j=V(e[4].details)),u(t,"class","hover:bg-spore-cream/20 transition-colors"),this.first=t},m(P,b){S(P,t,b),f(t,l),f(l,a),f(a,g),f(t,c),f(t,r),f(r,d),f(t,v),f(t,w),f(w,_),f(_,m),f(t,M),f(t,D),f(D,I),f(t,B)},p(P,b){e=P,b&4&&i!==(i=new Date(e[4].createdAt).toLocaleString()+"")&&H(g,i),b&4&&h!==(h=e[4].createdAt.toString())&&u(a,"datetime",h),b&4&&o!==(o=ee(e[4].user)+"")&&H(d,o),b&4&&n!==(n=te(e[4].action)+"")&&H(m,n),b&4&&E!==(E="text-sm font-bold "+le(e[4].action))&&u(_,"class",E),b&4&&C!==(C=V(e[4].details)+"")&&H(I,C),b&4&&j!==(j=V(e[4].details))&&u(D,"title",j)},d(P){P&&p(t)}}}function X(s){let e,t,l,a,i,g,h,c,r=s[1]>1&&Z(s),o=s[1]<s[0]&&$(s);return{c(){e=x("div"),r&&r.c(),t=A(),l=x("span"),a=L("Page "),i=L(s[1]),g=L(" of "),h=L(s[0]),c=A(),o&&o.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var v=y(e);r&&r.l(v),t=T(v),l=k(v,"SPAN",{class:!0});var w=y(l);a=N(w,"Page "),i=N(w,s[1]),g=N(w," of "),h=N(w,s[0]),w.forEach(p),c=T(v),o&&o.l(v),v.forEach(p),this.h()},h(){u(l,"class","px-4 py-2 text-spore-cream/60 text-sm"),u(e,"class","flex justify-center gap-2 mt-6")},m(d,v){S(d,e,v),r&&r.m(e,null),f(e,t),f(e,l),f(l,a),f(l,i),f(l,g),f(l,h),f(e,c),o&&o.m(e,null)},p(d,v){d[1]>1?r?r.p(d,v):(r=Z(d),r.c(),r.m(e,t)):r&&(r.d(1),r=null),v&2&&H(i,d[1]),v&1&&H(h,d[0]),d[1]<d[0]?o?o.p(d,v):(o=$(d),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(d){d&&p(e),r&&r.d(),o&&o.d()}}}function Z(s){let e,t,l;return{c(){e=x("a"),t=L("â† Previous"),this.h()},l(a){e=k(a,"A",{href:!0,class:!0});var i=y(e);t=N(i,"â† Previous"),i.forEach(p),this.h()},h(){u(e,"href",l="/audit-log?page="+(s[1]-1)),u(e,"class","px-4 py-2 bg-spore-white text-spore-steel rounded-lg hover:bg-spore-cream transition-colors text-sm font-bold")},m(a,i){S(a,e,i),f(e,t)},p(a,i){i&2&&l!==(l="/audit-log?page="+(a[1]-1))&&u(e,"href",l)},d(a){a&&p(e)}}}function $(s){let e,t,l;return{c(){e=x("a"),t=L("Next â†’"),this.h()},l(a){e=k(a,"A",{href:!0,class:!0});var i=y(e);t=N(i,"Next â†’"),i.forEach(p),this.h()},h(){u(e,"href",l="/audit-log?page="+(s[1]+1)),u(e,"class","px-4 py-2 bg-spore-white text-spore-steel rounded-lg hover:bg-spore-cream transition-colors text-sm font-bold")},m(a,i){S(a,e,i),f(e,t)},p(a,i){i&2&&l!==(l="/audit-log?page="+(a[1]+1))&&u(e,"href",l)},d(a){a&&p(e)}}}function fe(s){let e,t,l,a='<h1 class="text-4xl font-extrabold text-spore-cream tracking-tight">Audit Log</h1> <p class="text-spore-cream/60 mt-2">Track all changes made in your organization</p>',i;function g(r,o){return r[2].length>0?de:ce}let h=g(s),c=h(s);return{c(){e=A(),t=x("div"),l=x("div"),l.innerHTML=a,i=A(),c.c(),this.h()},l(r){ie("svelte-111n33w",document.head).forEach(p),e=T(r),t=k(r,"DIV",{class:!0});var d=y(t);l=k(d,"DIV",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-o4yp00"&&(l.innerHTML=a),i=T(d),c.l(d),d.forEach(p),this.h()},h(){document.title="Audit Log â€” Spore CMMS",u(l,"class","mb-8"),u(t,"class","max-w-7xl mx-auto px-4 py-10")},m(r,o){S(r,e,o),S(r,t,o),f(t,l),f(t,i),c.m(t,null)},p(r,[o]){h===(h=g(r))&&c?c.p(r,o):(c.d(1),c=h(r),c&&(c.c(),c.m(t,null)))},i:G,o:G,d(r){r&&(p(e),p(t)),c.d()}}}function ee(s){return s.firstName||s.lastName?[s.firstName,s.lastName].filter(Boolean).join(" "):s.email}function te(s){return s.replace(/_/g," ").toLowerCase().replace(/^\w/,e=>e.toUpperCase())}function le(s){return s.includes("DELETED")?"text-red-500":s.includes("CREATED")?"text-spore-forest":s.includes("CHANGED")||s.includes("ASSIGNED")?"text-spore-orange":"text-spore-steel"}function V(s){return s?typeof s=="object"?Object.entries(s).filter(([e,t])=>t!=null).map(([e,t])=>`${e}: ${t}`).join(", "):String(s):""}function ue(s,e,t){let l,a,i,{data:g}=e;return s.$$set=h=>{"data"in h&&t(3,g=h.data)},s.$$.update=()=>{s.$$.dirty&8&&t(2,l=g.auditLogs||[]),s.$$.dirty&8&&t(1,a=g.page),s.$$.dirty&8&&t(0,i=g.totalPages)},[i,a,l,g]}class me extends ae{constructor(e){super(),re(this,e,ue,fe,se,{data:3})}}export{me as component};
