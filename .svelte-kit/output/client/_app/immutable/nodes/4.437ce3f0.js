import{s as xt,n as We,b as mt,r as vt,a as Et,i as kt}from"../chunks/scheduler.1dbefa40.js";import{S as Ct,i as wt,e as d,s as x,c,a as _,k as W,f as E,d as p,l as n,g as Z,h as t,r as It,t as V,b as P,n as Se,j as R,o as Ne,p as it,q as bt}from"../chunks/index.316c407f.js";import{e as ye}from"../chunks/each.5b08259c.js";import{e as gt}from"../chunks/forms.d1ef4f5c.js";function dt(o,e,l){const s=o.slice();return s[15]=e[l],s}function ct(o,e,l){const s=o.slice();return s[12]=e[l],s}function Dt(o){var Ze,$e,et,tt,lt;let e,l,s,r,i,a=o[3].name+"",u,h,f,k=(($e=(Ze=o[3].room)==null?void 0:Ze.site)==null?void 0:$e.name)+"",A,T,b=((et=o[3].room)==null?void 0:et.name)+"",v,L,w,z,O,I,S="EDIT",D,H,ee='<button type="submit" class="px-4 py-2 rounded-lg font-bold text-sm text-red-400 border border-red-400/30 hover:bg-red-400/10 transition-colors" onclick="return confirm(&#39;Delete this asset? All associated work orders will also be deleted.&#39;)">DELETE</button>',M,B,U,$,se=o[4].total+"",J,N,m,G="Total WOs",g,q,K,re=o[4].pending+"",te,_e,Q,ze="Pending",He,oe,me,be=o[4].inProgress+"",ke,Me,ce,Je="In Progress",Be,ae,ve,ge=o[4].completed+"",Ce,Ge,ue,Ke="Completed",Re,le,ne,fe,Qe="Work Order History",qe,ie,je,we,Fe,Ue,Xe,j=((tt=o[3].room)==null?void 0:tt.building)&&ut(o),F=((lt=o[3].room)==null?void 0:lt.floor)&&ft(o);function Ye(C,y){return C[3].workOrders&&C[3].workOrders.length>0?At:Pt}let Ie=Ye(o),X=Ie(o);return{c(){e=d("div"),l=d("div"),s=d("div"),r=d("div"),i=d("h1"),u=V(a),h=x(),f=d("p"),A=V(k),T=V(" • Room "),v=V(b),L=x(),j&&j.c(),w=x(),F&&F.c(),z=x(),O=d("div"),I=d("button"),I.textContent=S,D=x(),H=d("form"),H.innerHTML=ee,M=x(),B=d("div"),U=d("div"),$=d("p"),J=V(se),N=x(),m=d("p"),m.textContent=G,g=x(),q=d("div"),K=d("p"),te=V(re),_e=x(),Q=d("p"),Q.textContent=ze,He=x(),oe=d("div"),me=d("p"),ke=V(be),Me=x(),ce=d("p"),ce.textContent=Je,Be=x(),ae=d("div"),ve=d("p"),Ce=V(ge),Ge=x(),ue=d("p"),ue.textContent=Ke,Re=x(),le=d("div"),ne=d("div"),fe=d("h2"),fe.textContent=Qe,qe=x(),ie=d("a"),je=V("View All →"),Fe=x(),X.c(),this.h()},l(C){e=c(C,"DIV",{class:!0});var y=_(e);l=c(y,"DIV",{class:!0});var xe=_(l);s=c(xe,"DIV",{class:!0});var pe=_(s);r=c(pe,"DIV",{});var he=_(r);i=c(he,"H1",{class:!0});var Ee=_(i);u=P(Ee,a),Ee.forEach(p),h=E(he),f=c(he,"P",{class:!0});var Y=_(f);A=P(Y,k),T=P(Y," • Room "),v=P(Y,b),L=E(Y),j&&j.l(Y),w=E(Y),F&&F.l(Y),Y.forEach(p),he.forEach(p),z=E(pe),O=c(pe,"DIV",{class:!0});var De=_(O);I=c(De,"BUTTON",{class:!0,"data-svelte-h":!0}),W(I)!=="svelte-9ofjog"&&(I.textContent=S),D=E(De),H=c(De,"FORM",{method:!0,action:!0,"data-svelte-h":!0}),W(H)!=="svelte-8pxr33"&&(H.innerHTML=ee),De.forEach(p),pe.forEach(p),xe.forEach(p),M=E(y),B=c(y,"DIV",{class:!0});var de=_(B);U=c(de,"DIV",{class:!0});var Ve=_(U);$=c(Ve,"P",{class:!0});var st=_($);J=P(st,se),st.forEach(p),N=E(Ve),m=c(Ve,"P",{class:!0,"data-svelte-h":!0}),W(m)!=="svelte-14h9nd3"&&(m.textContent=G),Ve.forEach(p),g=E(de),q=c(de,"DIV",{class:!0});var Pe=_(q);K=c(Pe,"P",{class:!0});var rt=_(K);te=P(rt,re),rt.forEach(p),_e=E(Pe),Q=c(Pe,"P",{class:!0,"data-svelte-h":!0}),W(Q)!=="svelte-vg7ifd"&&(Q.textContent=ze),Pe.forEach(p),He=E(de),oe=c(de,"DIV",{class:!0});var Ae=_(oe);me=c(Ae,"P",{class:!0});var ot=_(me);ke=P(ot,be),ot.forEach(p),Me=E(Ae),ce=c(Ae,"P",{class:!0,"data-svelte-h":!0}),W(ce)!=="svelte-bf56gq"&&(ce.textContent=Je),Ae.forEach(p),Be=E(de),ae=c(de,"DIV",{class:!0});var Te=_(ae);ve=c(Te,"P",{class:!0});var at=_(ve);Ce=P(at,ge),at.forEach(p),Ge=E(Te),ue=c(Te,"P",{class:!0,"data-svelte-h":!0}),W(ue)!=="svelte-300hz3"&&(ue.textContent=Ke),Te.forEach(p),de.forEach(p),Re=E(y),le=c(y,"DIV",{class:!0});var Le=_(le);ne=c(Le,"DIV",{class:!0});var Oe=_(ne);fe=c(Oe,"H2",{class:!0,"data-svelte-h":!0}),W(fe)!=="svelte-1ez9epy"&&(fe.textContent=Qe),qe=E(Oe),ie=c(Oe,"A",{href:!0,class:!0});var nt=_(ie);je=P(nt,"View All →"),nt.forEach(p),Oe.forEach(p),Fe=E(Le),X.l(Le),Le.forEach(p),y.forEach(p),this.h()},h(){n(i,"class","text-2xl font-extrabold text-spore-cream"),n(f,"class","text-spore-cream/60 mt-1 text-sm"),n(I,"class","bg-spore-forest text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-spore-forest/90 transition-colors"),n(H,"method","POST"),n(H,"action","?/delete"),n(O,"class","flex gap-2"),n(s,"class","flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4"),n(l,"class","bg-spore-dark p-6"),n($,"class","text-2xl font-extrabold text-spore-dark"),n(m,"class","text-xs font-bold text-spore-steel uppercase"),n(U,"class","p-4 text-center border-r border-spore-cream"),n(K,"class","text-2xl font-extrabold text-spore-steel"),n(Q,"class","text-xs font-bold text-spore-steel uppercase"),n(q,"class","p-4 text-center border-r border-spore-cream"),n(me,"class","text-2xl font-extrabold text-spore-orange"),n(ce,"class","text-xs font-bold text-spore-steel uppercase"),n(oe,"class","p-4 text-center border-r border-spore-cream"),n(ve,"class","text-2xl font-extrabold text-spore-forest"),n(ue,"class","text-xs font-bold text-spore-steel uppercase"),n(ae,"class","p-4 text-center"),n(B,"class","grid grid-cols-2 sm:grid-cols-4 border-b border-spore-cream"),n(fe,"class","text-lg font-bold text-spore-dark"),n(ie,"href",we="/work-orders?asset="+o[3].id),n(ie,"class","text-sm font-bold text-spore-orange hover:text-spore-orange/80"),n(ne,"class","flex justify-between items-center mb-4"),n(le,"class","p-6"),n(e,"class","bg-spore-white rounded-xl overflow-hidden")},m(C,y){Z(C,e,y),t(e,l),t(l,s),t(s,r),t(r,i),t(i,u),t(r,h),t(r,f),t(f,A),t(f,T),t(f,v),t(f,L),j&&j.m(f,null),t(f,w),F&&F.m(f,null),t(s,z),t(s,O),t(O,I),t(O,D),t(O,H),t(e,M),t(e,B),t(B,U),t(U,$),t($,J),t(U,N),t(U,m),t(B,g),t(B,q),t(q,K),t(K,te),t(q,_e),t(q,Q),t(B,He),t(B,oe),t(oe,me),t(me,ke),t(oe,Me),t(oe,ce),t(B,Be),t(B,ae),t(ae,ve),t(ve,Ce),t(ae,Ge),t(ae,ue),t(e,Re),t(e,le),t(le,ne),t(ne,fe),t(ne,qe),t(ne,ie),t(ie,je),t(le,Fe),X.m(le,null),Ue||(Xe=[Se(I,"click",o[6]),mt(gt.call(null,H))],Ue=!0)},p(C,y){var xe,pe,he,Ee,Y;y&8&&a!==(a=C[3].name+"")&&R(u,a),y&8&&k!==(k=((pe=(xe=C[3].room)==null?void 0:xe.site)==null?void 0:pe.name)+"")&&R(A,k),y&8&&b!==(b=((he=C[3].room)==null?void 0:he.name)+"")&&R(v,b),(Ee=C[3].room)!=null&&Ee.building?j?j.p(C,y):(j=ut(C),j.c(),j.m(f,w)):j&&(j.d(1),j=null),(Y=C[3].room)!=null&&Y.floor?F?F.p(C,y):(F=ft(C),F.c(),F.m(f,null)):F&&(F.d(1),F=null),y&16&&se!==(se=C[4].total+"")&&R(J,se),y&16&&re!==(re=C[4].pending+"")&&R(te,re),y&16&&be!==(be=C[4].inProgress+"")&&R(ke,be),y&16&&ge!==(ge=C[4].completed+"")&&R(Ce,ge),y&8&&we!==(we="/work-orders?asset="+C[3].id)&&n(ie,"href",we),Ie===(Ie=Ye(C))&&X?X.p(C,y):(X.d(1),X=Ie(C),X&&(X.c(),X.m(le,null)))},d(C){C&&p(e),j&&j.d(),F&&F.d(),X.d(),Ue=!1,vt(Xe)}}}function Vt(o){let e,l,s="Edit Asset",r,i,a,u,h="Asset Name",f,k,A,T,b,v="Location",L,w,z,O,I,S=o[1]?"SAVING...":"SAVE CHANGES",D,H,ee,M,B="CANCEL",U,$,se,J=ye(o[5]),N=[];for(let m=0;m<J.length;m+=1)N[m]=ht(ct(o,J,m));return{c(){e=d("div"),l=d("h1"),l.textContent=s,r=x(),i=d("form"),a=d("div"),u=d("label"),u.textContent=h,f=x(),k=d("input"),A=x(),T=d("div"),b=d("label"),b.textContent=v,L=x(),w=d("select");for(let m=0;m<N.length;m+=1)N[m].c();z=x(),O=d("div"),I=d("button"),D=V(S),ee=x(),M=d("button"),M.textContent=B,this.h()},l(m){e=c(m,"DIV",{class:!0});var G=_(e);l=c(G,"H1",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-149fwti"&&(l.textContent=s),r=E(G),i=c(G,"FORM",{method:!0,action:!0,class:!0});var g=_(i);a=c(g,"DIV",{});var q=_(a);u=c(q,"LABEL",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-kgp5p"&&(u.textContent=h),f=E(q),k=c(q,"INPUT",{type:!0,name:!0,class:!0}),q.forEach(p),A=E(g),T=c(g,"DIV",{});var K=_(T);b=c(K,"LABEL",{class:!0,"data-svelte-h":!0}),W(b)!=="svelte-18orh4x"&&(b.textContent=v),L=E(K),w=c(K,"SELECT",{name:!0,class:!0});var re=_(w);for(let Q=0;Q<N.length;Q+=1)N[Q].l(re);re.forEach(p),K.forEach(p),z=E(g),O=c(g,"DIV",{class:!0});var te=_(O);I=c(te,"BUTTON",{type:!0,class:!0});var _e=_(I);D=P(_e,S),_e.forEach(p),ee=E(te),M=c(te,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(M)!=="svelte-lbn5nt"&&(M.textContent=B),te.forEach(p),g.forEach(p),G.forEach(p),this.h()},h(){n(l,"class","text-2xl font-extrabold text-spore-dark mb-6"),n(u,"class","block text-sm font-bold text-spore-steel mb-2"),n(k,"type","text"),n(k,"name","name"),n(k,"class","w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-orange"),k.required=!0,n(b,"class","block text-sm font-bold text-spore-steel mb-2"),n(w,"name","roomId"),n(w,"class","w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-orange"),w.required=!0,o[2].roomId===void 0&&Et(()=>o[10].call(w)),n(I,"type","submit"),I.disabled=H=o[1]||!o[2].name.trim(),n(I,"class","bg-spore-forest text-white px-8 py-3 rounded-lg font-bold text-sm hover:bg-spore-forest/90 disabled:opacity-50 transition-colors"),n(M,"type","button"),n(M,"class","px-8 py-3 rounded-lg font-bold text-sm text-spore-steel hover:bg-spore-cream transition-colors"),n(O,"class","flex gap-4 pt-4"),n(i,"method","POST"),n(i,"action","?/update"),n(i,"class","space-y-6"),n(e,"class","bg-spore-white rounded-xl p-8")},m(m,G){Z(m,e,G),t(e,l),t(e,r),t(e,i),t(i,a),t(a,u),t(a,f),t(a,k),Ne(k,o[2].name),t(i,A),t(i,T),t(T,b),t(T,L),t(T,w);for(let g=0;g<N.length;g+=1)N[g]&&N[g].m(w,null);it(w,o[2].roomId,!0),t(i,z),t(i,O),t(O,I),t(I,D),t(O,ee),t(O,M),$||(se=[Se(k,"input",o[9]),Se(w,"change",o[10]),Se(M,"click",o[7]),mt(U=gt.call(null,i,o[11]))],$=!0)},p(m,G){if(G&36&&k.value!==m[2].name&&Ne(k,m[2].name),G&32){J=ye(m[5]);let g;for(g=0;g<J.length;g+=1){const q=ct(m,J,g);N[g]?N[g].p(q,G):(N[g]=ht(q),N[g].c(),N[g].m(w,null))}for(;g<N.length;g+=1)N[g].d(1);N.length=J.length}G&36&&it(w,m[2].roomId),G&2&&S!==(S=m[1]?"SAVING...":"SAVE CHANGES")&&R(D,S),G&38&&H!==(H=m[1]||!m[2].name.trim())&&(I.disabled=H),U&&kt(U.update)&&G&3&&U.update.call(null,m[11])},d(m){m&&p(e),bt(N,m),$=!1,vt(se)}}}function ut(o){let e,l=o[3].room.building+"",s;return{c(){e=V("• Bldg "),s=V(l)},l(r){e=P(r,"• Bldg "),s=P(r,l)},m(r,i){Z(r,e,i),Z(r,s,i)},p(r,i){i&8&&l!==(l=r[3].room.building+"")&&R(s,l)},d(r){r&&(p(e),p(s))}}}function ft(o){let e,l=o[3].room.floor+"",s;return{c(){e=V("• Floor "),s=V(l)},l(r){e=P(r,"• Floor "),s=P(r,l)},m(r,i){Z(r,e,i),Z(r,s,i)},p(r,i){i&8&&l!==(l=r[3].room.floor+"")&&R(s,l)},d(r){r&&(p(e),p(s))}}}function Pt(o){let e,l='<p class="text-spore-steel">No work orders for this asset</p> <a href="/work-orders" class="inline-block mt-4 bg-spore-orange text-white px-6 py-2 rounded-lg font-bold text-sm hover:bg-spore-orange/90 transition-colors">Create Work Order</a>';return{c(){e=d("div"),e.innerHTML=l,this.h()},l(s){e=c(s,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1gkpby5"&&(e.innerHTML=l),this.h()},h(){n(e,"class","text-center py-8 bg-spore-cream/20 rounded-lg")},m(s,r){Z(s,e,r)},p:We,d(s){s&&p(e)}}}function At(o){let e,l=ye(o[3].workOrders),s=[];for(let r=0;r<l.length;r+=1)s[r]=pt(dt(o,l,r));return{c(){e=d("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=c(r,"DIV",{class:!0});var i=_(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(p),this.h()},h(){n(e,"class","space-y-3")},m(r,i){Z(r,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(r,i){if(i&8){l=ye(r[3].workOrders);let a;for(a=0;a<l.length;a+=1){const u=dt(r,l,a);s[a]?s[a].p(u,i):(s[a]=pt(u),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=l.length}},d(r){r&&p(e),bt(s,r)}}}function pt(o){let e,l,s,r=o[15].title+"",i,a,u,h=(o[15].failureMode||"General")+"",f,k,A=new Date(o[15].createdAt).toLocaleDateString()+"",T,b,v,L=o[15].status.replace("_"," ")+"",w,z,O,I;return{c(){e=d("a"),l=d("div"),s=d("p"),i=V(r),a=x(),u=d("p"),f=V(h),k=V(" • "),T=V(A),b=x(),v=d("span"),w=V(L),O=x(),this.h()},l(S){e=c(S,"A",{href:!0,class:!0});var D=_(e);l=c(D,"DIV",{class:!0});var H=_(l);s=c(H,"P",{class:!0});var ee=_(s);i=P(ee,r),ee.forEach(p),a=E(H),u=c(H,"P",{class:!0});var M=_(u);f=P(M,h),k=P(M," • "),T=P(M,A),M.forEach(p),H.forEach(p),b=E(D),v=c(D,"SPAN",{class:!0});var B=_(v);w=P(B,L),B.forEach(p),O=E(D),D.forEach(p),this.h()},h(){n(s,"class","font-bold text-spore-dark truncate"),n(u,"class","text-xs text-spore-steel mt-1"),n(l,"class","flex-1 min-w-0"),n(v,"class",z="ml-4 px-3 py-1 text-xs font-bold uppercase tracking-wide rounded-full "+_t(o[15].status)),n(e,"href",I="/work-orders/"+o[15].id),n(e,"class","flex items-center justify-between p-4 bg-spore-cream/20 rounded-lg hover:bg-spore-cream/40 transition-colors border border-spore-cream/50")},m(S,D){Z(S,e,D),t(e,l),t(l,s),t(s,i),t(l,a),t(l,u),t(u,f),t(u,k),t(u,T),t(e,b),t(e,v),t(v,w),t(e,O)},p(S,D){D&8&&r!==(r=S[15].title+"")&&R(i,r),D&8&&h!==(h=(S[15].failureMode||"General")+"")&&R(f,h),D&8&&A!==(A=new Date(S[15].createdAt).toLocaleDateString()+"")&&R(T,A),D&8&&L!==(L=S[15].status.replace("_"," ")+"")&&R(w,L),D&8&&z!==(z="ml-4 px-3 py-1 text-xs font-bold uppercase tracking-wide rounded-full "+_t(S[15].status))&&n(v,"class",z),D&8&&I!==(I="/work-orders/"+S[15].id)&&n(e,"href",I)},d(S){S&&p(e)}}}function ht(o){var T;let e,l=((T=o[12].site)==null?void 0:T.name)+"",s,r,i=o[12].name+"",a,u,h=o[12].building?` (Bldg ${o[12].building})`:"",f,k,A;return{c(){e=d("option"),s=V(l),r=V(" - Room "),a=V(i),u=x(),f=V(h),k=x(),this.h()},l(b){e=c(b,"OPTION",{});var v=_(e);s=P(v,l),r=P(v," - Room "),a=P(v,i),u=E(v),f=P(v,h),k=E(v),v.forEach(p),this.h()},h(){e.__value=A=o[12].id,Ne(e,e.__value)},m(b,v){Z(b,e,v),t(e,s),t(e,r),t(e,a),t(e,u),t(e,f),t(e,k)},p(b,v){var L;v&32&&l!==(l=((L=b[12].site)==null?void 0:L.name)+"")&&R(s,l),v&32&&i!==(i=b[12].name+"")&&R(a,i),v&32&&h!==(h=b[12].building?` (Bldg ${b[12].building})`:"")&&R(f,h),v&32&&A!==(A=b[12].id)&&(e.__value=A,Ne(e,e.__value))},d(b){b&&p(e)}}}function Tt(o){let e,l,s='<a href="/assets" class="text-spore-cream/60 hover:text-spore-cream text-sm font-medium">← Back to Assets</a>',r;function i(h,f){return h[0]?Vt:Dt}let a=i(o),u=a(o);return{c(){e=d("div"),l=d("div"),l.innerHTML=s,r=x(),u.c(),this.h()},l(h){e=c(h,"DIV",{class:!0});var f=_(e);l=c(f,"DIV",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-c9soqw"&&(l.innerHTML=s),r=E(f),u.l(f),f.forEach(p),this.h()},h(){n(l,"class","mb-6"),n(e,"class","max-w-4xl mx-auto px-4 py-10")},m(h,f){Z(h,e,f),t(e,l),t(e,r),u.m(e,null)},p(h,[f]){a===(a=i(h))&&u?u.p(h,f):(u.d(1),u=a(h),u&&(u.c(),u.m(e,null)))},i:We,o:We,d(h){h&&p(e),u.d()}}}function _t(o){switch(o){case"COMPLETED":return"bg-spore-forest text-white";case"IN_PROGRESS":return"bg-spore-orange text-white";case"PENDING":return"bg-spore-steel text-white";case"ON_HOLD":return"bg-spore-cream text-spore-steel";case"CANCELLED":return"bg-red-600 text-white";default:return"bg-spore-steel text-white"}}function Lt(o,e,l){let s,r,i,{data:a}=e,u=!1,h=!1,f={name:"",roomId:""};function k(){l(2,f={name:s.name,roomId:s.roomId}),l(0,u=!0)}function A(){l(0,u=!1)}function T(){f.name=this.value,l(2,f),l(5,r),l(8,a)}function b(){f.roomId=It(this),l(2,f),l(5,r),l(8,a)}const v=()=>(l(1,h=!0),async({update:L})=>{await L(),l(1,h=!1),l(0,u=!1)});return o.$$set=L=>{"data"in L&&l(8,a=L.data)},o.$$.update=()=>{o.$$.dirty&256&&l(3,s=a.asset),o.$$.dirty&256&&l(5,r=a.rooms||[]),o.$$.dirty&256&&l(4,i=a.woStats)},[u,h,f,s,i,r,k,A,a,T,b,v]}class Ht extends Ct{constructor(e){super(),wt(this,e,Lt,Tt,xt,{data:8})}}export{Ht as component};
