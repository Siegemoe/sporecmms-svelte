import{s as kt,n as qe,d as Et}from"../chunks/scheduler.1dbefa40.js";import{S as Ct,i as Dt,s as x,e as d,t as O,m as Pt,d as f,f as w,c as p,a as m,k as B,b as L,l as n,g as z,h as t,j as H,q as wt}from"../chunks/index.316c407f.js";import{e as be,u as It,d as Vt}from"../chunks/each.5b08259c.js";import{w as St}from"../chunks/websocket.9bdac6e2.js";function ht(i,e,s){const l=i.slice();return l[7]=e[s],l}function mt(i,e,s){const l=i.slice();return l[10]=e[s],l}function vt(i,e,s){const l=i.slice();return l[13]=e[s],l}function Nt(i){let e,s="No recent work orders";return{c(){e=d("p"),e.textContent=s,this.h()},l(l){e=p(l,"P",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-bae9j6"&&(e.textContent=s),this.h()},h(){n(e,"class","text-spore-steel text-sm")},m(l,c){z(l,e,c)},p:qe,d(l){l&&f(e)}}}function yt(i){let e,s=be(i[3]),l=[];for(let c=0;c<s.length;c+=1)l[c]=_t(vt(i,s,c));return{c(){e=d("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=p(c,"DIV",{class:!0});var h=m(e);for(let r=0;r<l.length;r+=1)l[r].l(h);h.forEach(f),this.h()},h(){n(e,"class","space-y-3")},m(c,h){z(c,e,h);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(c,h){if(h&8){s=be(c[3]);let r;for(r=0;r<s.length;r+=1){const a=vt(c,s,r);l[r]?l[r].p(a,h):(l[r]=_t(a),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},d(c){c&&f(e),wt(l,c)}}}function _t(i){var J,K,ee,ae,ue,j;let e,s,l,c=i[13].title+"",h,r,a,o=(K=(J=i[13].asset)==null?void 0:J.room)!=null&&K.name?`Room ${i[13].asset.room.name}`:"",_,u,v=(ae=(ee=i[13].asset)==null?void 0:ee.room)!=null&&ae.building?` ‚Ä¢ Bldg ${i[13].asset.room.building}`:"",D,P,k=(j=(ue=i[13].asset)==null?void 0:ue.room)!=null&&j.floor?` ‚Ä¢ Floor ${i[13].asset.room.floor}`:"",S,I,E,b=i[13].status.replace("_"," ")+"",A,N,Q;return{c(){e=d("div"),s=d("div"),l=d("p"),h=O(c),r=x(),a=d("p"),_=O(o),u=x(),D=O(v),P=x(),S=O(k),I=x(),E=d("span"),A=O(b),Q=x(),this.h()},l(C){e=p(C,"DIV",{class:!0});var y=m(e);s=p(y,"DIV",{class:!0});var R=m(s);l=p(R,"P",{class:!0});var W=m(l);h=L(W,c),W.forEach(f),r=w(R),a=p(R,"P",{class:!0});var M=m(a);_=L(M,o),u=w(M),D=L(M,v),P=w(M),S=L(M,k),M.forEach(f),R.forEach(f),I=w(y),E=p(y,"SPAN",{class:!0});var U=m(E);A=L(U,b),U.forEach(f),Q=w(y),y.forEach(f),this.h()},h(){n(l,"class","text-sm font-bold text-spore-dark truncate"),n(a,"class","text-xs text-spore-steel mt-1"),n(s,"class","flex-1 min-w-0"),n(E,"class",N="ml-3 px-3 py-1 text-xs font-bold uppercase tracking-wide rounded-full "+(i[13].status==="COMPLETED"?"bg-spore-forest text-white":"")+" "+(i[13].status==="IN_PROGRESS"?"bg-spore-orange text-white":"")+" "+(i[13].status==="PENDING"?"bg-spore-steel text-white":"")+" "+(i[13].status==="ON_HOLD"?"bg-spore-cream text-spore-steel":"")),n(e,"class","flex items-center justify-between p-4 bg-spore-cream/20 rounded-lg border border-spore-cream/50")},m(C,y){z(C,e,y),t(e,s),t(s,l),t(l,h),t(s,r),t(s,a),t(a,_),t(a,u),t(a,D),t(a,P),t(a,S),t(e,I),t(e,E),t(E,A),t(e,Q)},p(C,y){var R,W,M,U,he,q;y&8&&c!==(c=C[13].title+"")&&H(h,c),y&8&&o!==(o=(W=(R=C[13].asset)==null?void 0:R.room)!=null&&W.name?`Room ${C[13].asset.room.name}`:"")&&H(_,o),y&8&&v!==(v=(U=(M=C[13].asset)==null?void 0:M.room)!=null&&U.building?` ‚Ä¢ Bldg ${C[13].asset.room.building}`:"")&&H(D,v),y&8&&k!==(k=(q=(he=C[13].asset)==null?void 0:he.room)!=null&&q.floor?` ‚Ä¢ Floor ${C[13].asset.room.floor}`:"")&&H(S,k),y&8&&b!==(b=C[13].status.replace("_"," ")+"")&&H(A,b),y&8&&N!==(N="ml-3 px-3 py-1 text-xs font-bold uppercase tracking-wide rounded-full "+(C[13].status==="COMPLETED"?"bg-spore-forest text-white":"")+" "+(C[13].status==="IN_PROGRESS"?"bg-spore-orange text-white":"")+" "+(C[13].status==="PENDING"?"bg-spore-steel text-white":"")+" "+(C[13].status==="ON_HOLD"?"bg-spore-cream text-spore-steel":""))&&n(E,"class",N)},d(C){C&&f(e)}}}function Ot(i){let e,s='<p class="text-spore-cream/50 text-sm font-medium">Waiting for activity...</p> <p class="text-xs text-spore-cream/30 mt-2">Updates appear here in real-time</p>';return{c(){e=d("div"),e.innerHTML=s,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1l92qcj"&&(e.innerHTML=s),this.h()},h(){n(e,"class","text-center py-10")},m(l,c){z(l,e,c)},p:qe,d(l){l&&f(e)}}}function Lt(i){let e,s=[],l=new Map,c=be(i[2]);const h=r=>r[10].id;for(let r=0;r<c.length;r+=1){let a=mt(i,c,r),o=h(a);l.set(o,s[r]=gt(o,a))}return{c(){e=d("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=p(r,"DIV",{class:!0});var a=m(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(f),this.h()},h(){n(e,"class","space-y-3")},m(r,a){z(r,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(r,a){a&4&&(c=be(r[2]),s=It(s,a,h,1,r,c,l,e,Vt,gt,null,mt))},d(r){r&&f(e);for(let a=0;a<s.length;a+=1)s[a].d()}}}function gt(i,e){let s,l,c=e[10].type==="new"?"üÜï":"üîÑ",h,r,a,o,_=e[10].message+"",u,v,D,P=e[10].time.toLocaleTimeString()+"",k,S,I;return{key:i,first:null,c(){s=d("div"),l=d("span"),h=O(c),r=x(),a=d("div"),o=d("p"),u=O(_),v=x(),D=d("p"),k=O(P),S=x(),this.h()},l(E){s=p(E,"DIV",{class:!0});var b=m(s);l=p(b,"SPAN",{class:!0});var A=m(l);h=L(A,c),A.forEach(f),r=w(b),a=p(b,"DIV",{class:!0});var N=m(a);o=p(N,"P",{class:!0});var Q=m(o);u=L(Q,_),Q.forEach(f),v=w(N),D=p(N,"P",{class:!0});var J=m(D);k=L(J,P),J.forEach(f),N.forEach(f),S=w(b),b.forEach(f),this.h()},h(){n(l,"class","text-base"),n(o,"class","text-sm font-medium text-spore-cream truncate"),n(D,"class","text-xs text-spore-cream/50 mt-1"),n(a,"class","flex-1 min-w-0"),n(s,"class",I="flex items-start gap-3 p-3 rounded-lg "+(e[10].type==="new"?"bg-spore-forest/20":"bg-spore-steel/50")),this.first=s},m(E,b){z(E,s,b),t(s,l),t(l,h),t(s,r),t(s,a),t(a,o),t(o,u),t(a,v),t(a,D),t(D,k),t(s,S)},p(E,b){e=E,b&4&&c!==(c=e[10].type==="new"?"üÜï":"üîÑ")&&H(h,c),b&4&&_!==(_=e[10].message+"")&&H(u,_),b&4&&P!==(P=e[10].time.toLocaleTimeString()+"")&&H(k,P),b&4&&I!==(I="flex items-start gap-3 p-3 rounded-lg "+(e[10].type==="new"?"bg-spore-forest/20":"bg-spore-steel/50"))&&n(s,"class",I)},d(E){E&&f(s)}}}function bt(i){let e,s,l="Sites",c,h,r=be(i[0].sites),a=[];for(let o=0;o<r.length;o+=1)a[o]=xt(ht(i,r,o));return{c(){e=d("div"),s=d("h2"),s.textContent=l,c=x(),h=d("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=p(o,"DIV",{class:!0});var _=m(e);s=p(_,"H2",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-ifb08s"&&(s.textContent=l),c=w(_),h=p(_,"DIV",{class:!0});var u=m(h);for(let v=0;v<a.length;v+=1)a[v].l(u);u.forEach(f),_.forEach(f),this.h()},h(){n(s,"class","text-lg font-bold text-spore-dark mb-5"),n(h,"class","space-y-3"),n(e,"class","bg-spore-white rounded-xl p-6")},m(o,_){z(o,e,_),t(e,s),t(e,c),t(e,h);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(h,null)},p(o,_){if(_&1){r=be(o[0].sites);let u;for(u=0;u<r.length;u+=1){const v=ht(o,r,u);a[u]?a[u].p(v,_):(a[u]=xt(v),a[u].c(),a[u].m(h,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(o){o&&f(e),wt(a,o)}}}function xt(i){var D;let e,s,l=i[7].name+"",c,h,r,a=(((D=i[7]._count)==null?void 0:D.rooms)||0)+"",o,_,u,v;return{c(){e=d("a"),s=d("span"),c=O(l),h=x(),r=d("span"),o=O(a),_=O(" rooms"),u=x(),this.h()},l(P){e=p(P,"A",{href:!0,class:!0});var k=m(e);s=p(k,"SPAN",{class:!0});var S=m(s);c=L(S,l),S.forEach(f),h=w(k),r=p(k,"SPAN",{class:!0});var I=m(r);o=L(I,a),_=L(I," rooms"),I.forEach(f),u=w(k),k.forEach(f),this.h()},h(){n(s,"class","text-sm font-bold text-spore-dark"),n(r,"class","text-xs font-semibold text-spore-steel"),n(e,"href",v="/sites/"+i[7].id),n(e,"class","flex items-center justify-between p-4 bg-spore-cream/20 rounded-lg hover:bg-spore-cream/40 transition-colors border border-spore-cream/50")},m(P,k){z(P,e,k),t(e,s),t(s,c),t(e,h),t(e,r),t(r,o),t(r,_),t(e,u)},p(P,k){var S;k&1&&l!==(l=P[7].name+"")&&H(c,l),k&1&&a!==(a=(((S=P[7]._count)==null?void 0:S.rooms)||0)+"")&&H(o,a),k&1&&v!==(v="/sites/"+P[7].id)&&n(e,"href",v)},d(P){P&&f(e)}}}function At(i){var ot,nt,it,ct;let e,s,l,c,h="Dashboard",r,a,o,_,u,v,D=i[1]?"Live updates enabled":"Connecting...",P,k,S,I,E,b,A,N,Q="Total WOs",J,K,ee=(((ot=i[4])==null?void 0:ot.total)||0)+"",ae,ue,j,C,y="Pending",R,W,M=(((nt=i[4])==null?void 0:nt.pending)||0)+"",U,he,q,re,$e="In Progress",Fe,me,xe=(((it=i[4])==null?void 0:it.inProgress)||0)+"",Ce,Ge,te,oe,et="Completed",Be,ve,we=(((ct=i[4])==null?void 0:ct.completed)||0)+"",De,Ue,ne,tt='<h2 class="text-lg font-bold text-spore-dark mb-5">Quick Actions</h2> <div class="grid grid-cols-2 md:grid-cols-4 gap-4"><a href="/work-orders" class="flex flex-col items-center p-5 bg-spore-cream/30 rounded-xl hover:bg-spore-cream/50 transition-colors"><span class="text-2xl mb-2">üìã</span> <span class="text-sm font-semibold text-spore-steel">All Work Orders</span></a> <a href="/sites" class="flex flex-col items-center p-5 bg-spore-cream/30 rounded-xl hover:bg-spore-cream/50 transition-colors"><span class="text-2xl mb-2">üè¢</span> <span class="text-sm font-semibold text-spore-steel">Sites</span></a> <a href="/assets" class="flex flex-col items-center p-5 bg-spore-cream/30 rounded-xl hover:bg-spore-cream/50 transition-colors"><span class="text-2xl mb-2">‚öôÔ∏è</span> <span class="text-sm font-semibold text-spore-steel">Assets</span></a> <a href="/work-orders?create=true" class="flex flex-col items-center p-5 bg-spore-orange rounded-xl hover:bg-spore-orange/90 transition-colors"><span class="text-2xl mb-2">‚ûï</span> <span class="text-sm font-bold text-white">New WO</span></a></div>',ze,X,ie,st='<h2 class="text-lg font-bold text-spore-dark">Recent Work Orders</h2> <a href="/work-orders" class="text-sm font-semibold text-spore-orange hover:text-spore-orange/80">View all ‚Üí</a>',Qe,Je,Y,Z,se,ce,lt="Live Feed",Ke,$,_e,Pe,Xe,ke=i[1]?"Connected":"Offline",Ie,Ve,Ye,Ze;function at(g,V){return g[3].length>0?yt:Nt}let Se=at(i),F=Se(i);function rt(g,V){return g[2].length>0?Lt:Ot}let Ne=rt(i),G=Ne(i),T=i[0].sites&&i[0].sites.length>0&&bt(i);return{c(){e=x(),s=d("div"),l=d("div"),c=d("h1"),c.textContent=h,r=x(),a=d("div"),o=d("span"),_=d("span"),v=x(),P=O(D),S=x(),I=d("div"),E=d("div"),b=d("div"),A=d("div"),N=d("p"),N.textContent=Q,J=x(),K=d("p"),ae=O(ee),ue=x(),j=d("div"),C=d("p"),C.textContent=y,R=x(),W=d("p"),U=O(M),he=x(),q=d("div"),re=d("p"),re.textContent=$e,Fe=x(),me=d("p"),Ce=O(xe),Ge=x(),te=d("div"),oe=d("p"),oe.textContent=et,Be=x(),ve=d("p"),De=O(we),Ue=x(),ne=d("div"),ne.innerHTML=tt,ze=x(),X=d("div"),ie=d("div"),ie.innerHTML=st,Qe=x(),F.c(),Je=x(),Y=d("div"),Z=d("div"),se=d("div"),ce=d("h2"),ce.textContent=lt,Ke=x(),$=d("span"),_e=d("span"),Xe=x(),Ie=O(ke),Ye=x(),G.c(),Ze=x(),T&&T.c(),this.h()},l(g){Pt("svelte-6500cf",document.head).forEach(f),e=w(g),s=p(g,"DIV",{class:!0});var de=m(s);l=p(de,"DIV",{class:!0});var pe=m(l);c=p(pe,"H1",{class:!0,"data-svelte-h":!0}),B(c)!=="svelte-1nvtx26"&&(c.textContent=h),r=w(pe),a=p(pe,"DIV",{class:!0});var Ee=m(a);o=p(Ee,"SPAN",{class:!0,role:!0,"aria-live":!0});var fe=m(o);_=p(fe,"SPAN",{class:!0,"aria-hidden":!0}),m(_).forEach(f),v=w(fe),P=L(fe,D),fe.forEach(f),Ee.forEach(f),pe.forEach(f),S=w(de),I=p(de,"DIV",{class:!0});var ye=m(I);E=p(ye,"DIV",{class:!0});var ge=m(E);b=p(ge,"DIV",{class:!0});var le=m(b);A=p(le,"DIV",{class:!0});var Oe=m(A);N=p(Oe,"P",{class:!0,"data-svelte-h":!0}),B(N)!=="svelte-cby6zq"&&(N.textContent=Q),J=w(Oe),K=p(Oe,"P",{class:!0});var dt=m(K);ae=L(dt,ee),dt.forEach(f),Oe.forEach(f),ue=w(le),j=p(le,"DIV",{class:!0});var Le=m(j);C=p(Le,"P",{class:!0,"data-svelte-h":!0}),B(C)!=="svelte-1i4hqk4"&&(C.textContent=y),R=w(Le),W=p(Le,"P",{class:!0});var pt=m(W);U=L(pt,M),pt.forEach(f),Le.forEach(f),he=w(le),q=p(le,"DIV",{class:!0});var Ae=m(q);re=p(Ae,"P",{class:!0,"data-svelte-h":!0}),B(re)!=="svelte-m6iuib"&&(re.textContent=$e),Fe=w(Ae),me=p(Ae,"P",{class:!0});var ft=m(me);Ce=L(ft,xe),ft.forEach(f),Ae.forEach(f),Ge=w(le),te=p(le,"DIV",{class:!0});var Te=m(te);oe=p(Te,"P",{class:!0,"data-svelte-h":!0}),B(oe)!=="svelte-vsahe6"&&(oe.textContent=et),Be=w(Te),ve=p(Te,"P",{class:!0});var ut=m(ve);De=L(ut,we),ut.forEach(f),Te.forEach(f),le.forEach(f),Ue=w(ge),ne=p(ge,"DIV",{class:!0,"data-svelte-h":!0}),B(ne)!=="svelte-1ml3ejd"&&(ne.innerHTML=tt),ze=w(ge),X=p(ge,"DIV",{class:!0});var He=m(X);ie=p(He,"DIV",{class:!0,"data-svelte-h":!0}),B(ie)!=="svelte-g1vs87"&&(ie.innerHTML=st),Qe=w(He),F.l(He),He.forEach(f),ge.forEach(f),Je=w(ye),Y=p(ye,"DIV",{class:!0});var Me=m(Y);Z=p(Me,"DIV",{class:!0});var We=m(Z);se=p(We,"DIV",{class:!0});var je=m(se);ce=p(je,"H2",{class:!0,"data-svelte-h":!0}),B(ce)!=="svelte-846tpj"&&(ce.textContent=lt),Ke=w(je),$=p(je,"SPAN",{class:!0});var Re=m($);_e=p(Re,"SPAN",{class:!0}),m(_e).forEach(f),Xe=w(Re),Ie=L(Re,ke),Re.forEach(f),je.forEach(f),Ye=w(We),G.l(We),We.forEach(f),Ze=w(Me),T&&T.l(Me),Me.forEach(f),ye.forEach(f),de.forEach(f),this.h()},h(){document.title="Dashboard ‚Äî Spore CMMS",n(c,"class","text-4xl font-extrabold text-spore-cream tracking-tight"),n(_,"class",u="w-2 h-2 rounded-full "+(i[1]?"bg-spore-orange animate-pulse":"bg-spore-cream/30")),n(_,"aria-hidden","true"),n(o,"class",k="flex items-center gap-2 text-sm font-medium "+(i[1]?"text-spore-orange":"text-spore-cream/50")),n(o,"role","status"),n(o,"aria-live","polite"),n(a,"class","flex items-center gap-3 mt-2"),n(l,"class","mb-10"),n(N,"class","text-xs font-semibold text-spore-steel uppercase tracking-wide"),n(K,"class","text-3xl font-extrabold text-spore-dark mt-1"),n(A,"class","bg-spore-white rounded-xl p-5"),n(C,"class","text-xs font-semibold text-spore-steel uppercase tracking-wide"),n(W,"class","text-3xl font-extrabold text-spore-orange mt-1"),n(j,"class","bg-spore-white rounded-xl p-5"),n(re,"class","text-xs font-semibold text-spore-steel uppercase tracking-wide"),n(me,"class","text-3xl font-extrabold text-spore-steel mt-1"),n(q,"class","bg-spore-white rounded-xl p-5"),n(oe,"class","text-xs font-semibold text-spore-steel uppercase tracking-wide"),n(ve,"class","text-3xl font-extrabold text-spore-forest mt-1"),n(te,"class","bg-spore-white rounded-xl p-5"),n(b,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),n(ne,"class","bg-spore-white rounded-xl p-6"),n(ie,"class","flex justify-between items-center mb-5"),n(X,"class","bg-spore-white rounded-xl p-6"),n(E,"class","lg:col-span-2 space-y-8"),n(ce,"class","text-lg font-bold text-spore-cream"),n(_e,"class",Pe="w-2 h-2 rounded-full "+(i[1]?"bg-spore-orange animate-pulse":"bg-spore-cream/30")),n($,"class",Ve="flex items-center gap-2 text-xs font-semibold "+(i[1]?"text-spore-orange":"text-spore-cream/50")),n(se,"class","flex items-center justify-between mb-5"),n(Z,"class","bg-spore-dark rounded-xl p-6 border border-spore-steel/30"),n(Y,"class","space-y-8"),n(I,"class","grid grid-cols-1 lg:grid-cols-3 gap-8"),n(s,"class","max-w-7xl mx-auto px-4 py-10")},m(g,V){z(g,e,V),z(g,s,V),t(s,l),t(l,c),t(l,r),t(l,a),t(a,o),t(o,_),t(o,v),t(o,P),t(s,S),t(s,I),t(I,E),t(E,b),t(b,A),t(A,N),t(A,J),t(A,K),t(K,ae),t(b,ue),t(b,j),t(j,C),t(j,R),t(j,W),t(W,U),t(b,he),t(b,q),t(q,re),t(q,Fe),t(q,me),t(me,Ce),t(b,Ge),t(b,te),t(te,oe),t(te,Be),t(te,ve),t(ve,De),t(E,Ue),t(E,ne),t(E,ze),t(E,X),t(X,ie),t(X,Qe),F.m(X,null),t(I,Je),t(I,Y),t(Y,Z),t(Z,se),t(se,ce),t(se,Ke),t(se,$),t($,_e),t($,Xe),t($,Ie),t(Z,Ye),G.m(Z,null),t(Y,Ze),T&&T.m(Y,null)},p(g,[V]){var de,pe,Ee,fe;V&2&&u!==(u="w-2 h-2 rounded-full "+(g[1]?"bg-spore-orange animate-pulse":"bg-spore-cream/30"))&&n(_,"class",u),V&2&&D!==(D=g[1]?"Live updates enabled":"Connecting...")&&H(P,D),V&2&&k!==(k="flex items-center gap-2 text-sm font-medium "+(g[1]?"text-spore-orange":"text-spore-cream/50"))&&n(o,"class",k),V&16&&ee!==(ee=(((de=g[4])==null?void 0:de.total)||0)+"")&&H(ae,ee),V&16&&M!==(M=(((pe=g[4])==null?void 0:pe.pending)||0)+"")&&H(U,M),V&16&&xe!==(xe=(((Ee=g[4])==null?void 0:Ee.inProgress)||0)+"")&&H(Ce,xe),V&16&&we!==(we=(((fe=g[4])==null?void 0:fe.completed)||0)+"")&&H(De,we),Se===(Se=at(g))&&F?F.p(g,V):(F.d(1),F=Se(g),F&&(F.c(),F.m(X,null))),V&2&&Pe!==(Pe="w-2 h-2 rounded-full "+(g[1]?"bg-spore-orange animate-pulse":"bg-spore-cream/30"))&&n(_e,"class",Pe),V&2&&ke!==(ke=g[1]?"Connected":"Offline")&&H(Ie,ke),V&2&&Ve!==(Ve="flex items-center gap-2 text-xs font-semibold "+(g[1]?"text-spore-orange":"text-spore-cream/50"))&&n($,"class",Ve),Ne===(Ne=rt(g))&&G?G.p(g,V):(G.d(1),G=Ne(g),G&&(G.c(),G.m(Z,null))),g[0].sites&&g[0].sites.length>0?T?T.p(g,V):(T=bt(g),T.c(),T.m(Y,null)):T&&(T.d(1),T=null)},i:qe,o:qe,d(g){g&&(f(e),f(s)),F.d(),G.d(),T&&T.d()}}}function Tt(i,e,s){let l,c,{data:h}=e,r=!1,a=[],o=0;const _=St.subscribe(u=>{if(s(1,r=u.isConnected),u.messages.length>0){const v=u.messages[0];if(v.timestamp&&v.timestamp>o){if(o=v.timestamp,v.type==="WO_UPDATE"){const D=v.payload;s(2,a=[{type:"update",message:`${D.title} ‚Üí ${D.status}`,time:new Date,id:v.timestamp},...a].slice(0,10))}if(v.type==="WO_NEW"){const D=v.payload;s(2,a=[{type:"new",message:`New: ${D.title}`,time:new Date,id:v.timestamp},...a].slice(0,10))}}}});return Et(()=>_()),i.$$set=u=>{"data"in u&&s(0,h=u.data)},i.$$.update=()=>{i.$$.dirty&1&&s(4,l=h.stats),i.$$.dirty&1&&s(3,c=h.recentWorkOrders||[])},[h,r,a,c,l]}class Rt extends Ct{constructor(e){super(),Dt(this,e,Tt,At,kt,{data:0})}}export{Rt as component};
