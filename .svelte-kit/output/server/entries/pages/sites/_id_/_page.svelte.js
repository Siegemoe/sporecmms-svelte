import { c as create_ssr_component, e as escape, f as each, g as add_attribute } from "../../../../chunks/ssr.js";
import "devalue";
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let site;
  let buildingsWithUnits;
  let unassignedUnits;
  let allBuildings;
  let { data } = $$props;
  let editingUnitId = null;
  let editingUnit = { name: "", buildingId: "", floor: "" };
  let editingBuildingId = null;
  let editingBuilding = { name: "", description: "" };
  if ($$props.data === void 0 && $$bindings.data && data !== void 0)
    $$bindings.data(data);
  site = data.site;
  buildingsWithUnits = data.buildingsWithUnits || [];
  unassignedUnits = data.unassignedUnits || [];
  allBuildings = site.Building || [];
  return `<div class="max-w-7xl mx-auto px-4 py-10"> <div class="mb-6"><a href="/sites" class="text-spore-cream/60 hover:text-spore-cream text-sm font-medium" data-svelte-h="svelte-1rrwjp1">‚Üê Back to Sites</a></div>  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-10"><div><h1 class="text-4xl font-extrabold text-spore-cream tracking-tight">${escape(site.name)}</h1> <p class="text-spore-cream/60 mt-2 text-sm font-medium">${escape(site._count?.units || 0)} unit${escape(site._count?.units !== 1 ? "s" : "")} ‚Ä¢ ${escape(site._count?.buildings || 0)} building${escape(site._count?.buildings !== 1 ? "s" : "")}</p></div> <div class="flex gap-3"><button class="bg-spore-steel text-white px-6 py-3 rounded-xl hover:bg-spore-steel/90 transition-colors text-sm font-bold tracking-wide">${escape("+ ADD BUILDING")}</button> <button class="bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 transition-colors text-sm font-bold tracking-wide">${escape("+ ADD UNIT")}</button></div></div>  ${``}  ${``}  ${buildingsWithUnits.length > 0 || unassignedUnits.length > 0 ? `<div class="space-y-8">${each(buildingsWithUnits, (building) => {
    return `${editingBuildingId === building.id ? ` <div class="bg-spore-white rounded-xl p-6 ring-2 ring-spore-steel"><form method="POST" action="?/updateBuilding" class="mb-6"><input type="hidden" name="buildingId"${add_attribute("value", building.id, 0)}> <div class="flex gap-4 items-end"><div class="flex-1"><label class="block text-sm font-medium text-spore-dark mb-1" data-svelte-h="svelte-dal9dr">Building Name</label> <input type="text" name="name" placeholder="Building name" class="w-full px-4 py-3 rounded-lg border border-spore-steel bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-steel font-bold" required${add_attribute("value", editingBuilding.name, 0)}></div> <div class="flex-1"><label class="block text-sm font-medium text-spore-dark mb-1" data-svelte-h="svelte-1mfkp1c">Description</label> <input type="text" name="description" placeholder="Description (optional)" class="w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-steel"${add_attribute("value", editingBuilding.description, 0)}></div> <div class="flex gap-2"><button type="submit" ${!editingBuilding.name.trim() ? "disabled" : ""} class="bg-spore-forest text-white px-4 py-3 rounded-lg font-bold text-sm hover:bg-spore-forest/90 disabled:opacity-50 transition-colors">${escape("SAVE")}</button> <button type="button" class="px-4 py-3 rounded-lg font-bold text-sm text-spore-steel hover:bg-spore-cream transition-colors" data-svelte-h="svelte-ze24xl">CANCEL
									</button></div> </div></form> </div>` : ` <div class="bg-spore-white rounded-xl overflow-hidden"> <div class="bg-spore-dark px-6 py-4 flex justify-between items-center"><div><h2 class="text-lg font-bold text-spore-cream">${escape(building.name)}</h2> <p class="text-spore-cream/60 text-sm">${escape(building.units.length)} unit${escape(building.units.length !== 1 ? "s" : "")} </p></div> <div class="flex gap-2"><button class="text-spore-cream/60 hover:text-spore-orange transition-colors" aria-label="${"Edit " + escape(building.name, true)}">‚úèÔ∏è</button> <form method="POST" action="?/deleteBuilding"><input type="hidden" name="buildingId"${add_attribute("value", building.id, 0)}> <button type="submit" class="text-spore-cream/60 hover:text-red-400 transition-colors" aria-label="${"Delete " + escape(building.name, true)}">‚úï
									</button></form> </div></div>  ${building.units.length > 0 ? `<div class="p-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">${each(building.units, (unit) => {
      let isEditing = editingUnitId === unit.id;
      return ` ${isEditing ? ` <div class="bg-spore-cream/20 rounded-lg p-4 border-2 border-spore-orange"><form method="POST" action="?/updateUnit"><input type="hidden" name="unitId"${add_attribute("value", unit.id, 0)}> <div class="space-y-3"><input type="text" name="roomNumber" placeholder="Unit name" class="w-full px-3 py-2 rounded border border-spore-cream bg-white text-spore-dark text-sm focus:outline-none focus:ring-2 focus:ring-spore-orange" required${add_attribute("value", editingUnit.name, 0)}> <div class="grid grid-cols-2 gap-2"><select name="buildingId" class="px-3 py-2 rounded border border-spore-cream bg-white text-spore-dark text-sm focus:outline-none focus:ring-2 focus:ring-spore-orange"><option value="" data-svelte-h="svelte-nkh85j">Unassigned</option>${each(allBuildings, (b) => {
        return `<option${add_attribute("value", b.id, 0)}>${escape(b.name)}</option>`;
      })}</select> <input type="number" name="floor" placeholder="Floor" class="px-3 py-2 rounded border border-spore-cream bg-white text-spore-dark text-sm focus:outline-none focus:ring-2 focus:ring-spore-orange"${add_attribute("value", editingUnit.floor, 0)}></div> <div class="flex gap-2"><button type="submit" ${!editingUnit.name.trim() ? "disabled" : ""} class="flex-1 bg-spore-forest text-white px-3 py-2 rounded font-bold text-xs hover:bg-spore-forest/90 disabled:opacity-50 transition-colors">${escape("SAVE")}</button> <button type="button" class="px-3 py-2 rounded font-bold text-xs text-spore-steel hover:bg-spore-cream transition-colors" data-svelte-h="svelte-9fkin8">CANCEL
															</button></div> </div></form> </div>` : ` <div class="bg-spore-cream/20 rounded-lg p-4 border border-spore-cream/50 group hover:border-spore-orange/50 transition-colors"><div class="flex justify-between items-start"><div><h3 class="font-bold text-spore-dark">${escape(unit.name || unit.roomNumber)}</h3> <p class="text-sm text-spore-steel mt-1">${unit.floor ? `Floor ${escape(unit.floor)}` : ``} ${unit._count?.assets ? `<span class="ml-2">‚Ä¢ ${escape(unit._count.assets)} asset${escape(unit._count.assets !== 1 ? "s" : "")}</span>` : ``} </p></div> <div class="flex gap-2"><button class="text-spore-steel/40 hover:text-spore-orange transition-colors opacity-0 group-hover:opacity-100" data-svelte-h="svelte-xbha6c">‚úèÔ∏è</button> <form method="POST" action="?/deleteUnit"><input type="hidden" name="unitId"${add_attribute("value", unit.id, 0)}> <button type="submit" class="text-spore-steel/40 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100" data-svelte-h="svelte-3v0zhq">‚úï
															</button></form> </div></div> <div class="mt-4 pt-3 border-t border-spore-cream/50"><a href="${"/assets?unit=" + escape(unit.id, true)}" class="text-xs font-semibold text-spore-orange hover:text-spore-orange/80">View Assets ‚Üí
													</a></div> </div>`}`;
    })}</div> </div>` : `<div class="p-8 text-center"><p class="text-spore-steel text-sm" data-svelte-h="svelte-78k5a5">No units in this building yet</p> </div>`} </div>`}`;
  })}  ${unassignedUnits.length > 0 ? `<div class="bg-spore-white rounded-xl overflow-hidden"><div class="bg-spore-cream/50 px-6 py-4"><h2 class="text-lg font-bold text-spore-cream" data-svelte-h="svelte-17hh07w">Unassigned Units</h2> <p class="text-spore-cream/60 text-sm">${escape(unassignedUnits.length)} unit${escape(unassignedUnits.length !== 1 ? "s" : "")}</p></div> <div class="p-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">${each(unassignedUnits, (unit) => {
    return `${editingUnitId === unit.id ? ` <div class="bg-spore-cream/20 rounded-lg p-4 border-2 border-spore-orange"><form method="POST" action="?/updateUnit"><input type="hidden" name="unitId"${add_attribute("value", unit.id, 0)}> <div class="space-y-3"><input type="text" name="roomNumber" placeholder="Unit name" class="w-full px-3 py-2 rounded border border-spore-cream bg-white text-spore-dark text-sm focus:outline-none focus:ring-2 focus:ring-spore-orange" required${add_attribute("value", editingUnit.name, 0)}> <div class="grid grid-cols-2 gap-2"><select name="buildingId" class="px-3 py-2 rounded border border-spore-cream bg-white text-spore-dark text-sm focus:outline-none focus:ring-2 focus:ring-spore-orange"><option value="" data-svelte-h="svelte-nkh85j">Unassigned</option>${each(allBuildings, (b) => {
      return `<option${add_attribute("value", b.id, 0)}>${escape(b.name)}</option>`;
    })}</select> <input type="number" name="floor" placeholder="Floor" class="px-3 py-2 rounded border border-spore-cream bg-white text-spore-dark text-sm focus:outline-none focus:ring-2 focus:ring-spore-orange"${add_attribute("value", editingUnit.floor, 0)}></div> <div class="flex gap-2"><button type="submit" ${!editingUnit.name.trim() ? "disabled" : ""} class="flex-1 bg-spore-forest text-white px-3 py-2 rounded font-bold text-xs hover:bg-spore-forest/90 disabled:opacity-50 transition-colors">${escape("SAVE")}</button> <button type="button" class="px-3 py-2 rounded font-bold text-xs text-spore-steel hover:bg-spore-cream transition-colors" data-svelte-h="svelte-9mmxtg">CANCEL
													</button></div> </div></form> </div>` : ` <div class="bg-spore-cream/20 rounded-lg p-4 border border-spore-cream/50 group hover:border-spore-orange/50 transition-colors"><div class="flex justify-between items-start"><div><h3 class="font-bold text-spore-dark">${escape(unit.name || unit.roomNumber)}</h3> <p class="text-sm text-spore-steel mt-1">${unit.floor ? `Floor ${escape(unit.floor)}` : ``} ${unit._count?.assets ? `<span class="ml-2">‚Ä¢ ${escape(unit._count.assets)} asset${escape(unit._count.assets !== 1 ? "s" : "")}</span>` : ``} </p></div> <div class="flex gap-2"><button class="text-spore-steel/40 hover:text-spore-orange transition-colors opacity-0 group-hover:opacity-100" data-svelte-h="svelte-rvh0p6">‚úèÔ∏è</button> <form method="POST" action="?/deleteUnit"><input type="hidden" name="unitId"${add_attribute("value", unit.id, 0)}> <button type="submit" class="text-spore-steel/40 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100" data-svelte-h="svelte-40zcaq">‚úï
													</button></form> </div></div> <div class="mt-4 pt-3 border-t border-spore-cream/50"><a href="${"/assets?unit=" + escape(unit.id, true)}" class="text-xs font-semibold text-spore-orange hover:text-spore-orange/80">View Assets ‚Üí
											</a></div> </div>`}`;
  })}</div></div></div>` : ``}</div>` : `<div class="text-center py-16 bg-spore-white rounded-xl"><div class="text-5xl mb-4" data-svelte-h="svelte-n08cxc">üè¢</div> <h3 class="text-xl font-bold text-spore-dark mb-2" data-svelte-h="svelte-1c0awzq">No buildings or units yet</h3> <p class="text-spore-steel mb-6" data-svelte-h="svelte-33yep1">Add a building to start organizing your site</p> <button class="bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 transition-colors text-sm font-bold" data-svelte-h="svelte-1cfi1x1">+ ADD BUILDING</button></div>`}</div>`;
});
export {
  Page as default
};
