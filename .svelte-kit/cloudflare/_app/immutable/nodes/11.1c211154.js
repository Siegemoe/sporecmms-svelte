import{s as Ie,n as ue,b as ce,i as Ce,r as de}from"../chunks/scheduler.1dbefa40.js";import{S as we,i as Se,s as w,e as p,t as U,m as Ne,d as g,f as S,c as h,a as C,k as P,b as L,l as i,g as R,h as o,n as F,j as z,o as le,u as te,w as be,v as ge}from"../chunks/index.316c407f.js";import{e as xe,u as De,d as Ve}from"../chunks/each.5b08259c.js";import{e as fe}from"../chunks/forms.d1ef4f5c.js";function Ee(r,l,e){const u=r.slice();return u[17]=l[e],u}function ke(r){let l,e,u="Create New Site",v,n,t,s,a,x=r[2]?"CREATING...":"CREATE SITE",b,_,T,I,d;return{c(){l=p("div"),e=p("h2"),e.textContent=u,v=w(),n=p("form"),t=p("input"),s=w(),a=p("button"),b=U(x),this.h()},l(c){l=h(c,"DIV",{class:!0});var f=C(l);e=h(f,"H2",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-15ukcv8"&&(e.textContent=u),v=S(f),n=h(f,"FORM",{method:!0,action:!0,class:!0});var k=C(n);t=h(k,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),s=S(k),a=h(k,"BUTTON",{type:!0,class:!0});var m=C(a);b=L(m,x),m.forEach(g),k.forEach(g),f.forEach(g),this.h()},h(){i(e,"class","text-lg font-bold text-spore-dark mb-4"),i(t,"type","text"),i(t,"name","name"),i(t,"placeholder","Site name (e.g., Sunrise Manor)"),i(t,"class","flex-1 px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange"),t.required=!0,i(a,"type","submit"),a.disabled=_=r[2]||!r[1].trim(),i(a,"class","bg-spore-forest text-white px-6 py-3 rounded-lg font-bold text-sm tracking-wide hover:bg-spore-forest/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),i(n,"method","POST"),i(n,"action","?/create"),i(n,"class","flex flex-col sm:flex-row gap-4"),i(l,"class","bg-spore-white rounded-xl p-6 mb-8")},m(c,f){R(c,l,f),o(l,e),o(l,v),o(l,n),o(n,t),le(t,r[1]),o(n,s),o(n,a),o(a,b),I||(d=[F(t,"input",r[10]),ce(T=fe.call(null,n,r[11]))],I=!0)},p(c,f){f&2&&t.value!==c[1]&&le(t,c[1]),f&4&&x!==(x=c[2]?"CREATING...":"CREATE SITE")&&z(b,x),f&6&&_!==(_=c[2]||!c[1].trim())&&(a.disabled=_),T&&Ce(T.update)&&f&7&&T.update.call(null,c[11])},d(c){c&&g(l),I=!1,de(d)}}}function Ae(r){let l,e,u="üè¢",v,n,t="No sites yet",s,a,x="Create your first site to get started",b,_,T="+ CREATE SITE",I,d;return{c(){l=p("div"),e=p("div"),e.textContent=u,v=w(),n=p("h3"),n.textContent=t,s=w(),a=p("p"),a.textContent=x,b=w(),_=p("button"),_.textContent=T,this.h()},l(c){l=h(c,"DIV",{class:!0});var f=C(l);e=h(f,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-n08cxc"&&(e.textContent=u),v=S(f),n=h(f,"H3",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-1r1pntd"&&(n.textContent=t),s=S(f),a=h(f,"P",{class:!0,"data-svelte-h":!0}),P(a)!=="svelte-1itm7tw"&&(a.textContent=x),b=S(f),_=h(f,"BUTTON",{class:!0,"data-svelte-h":!0}),P(_)!=="svelte-1vkd0hb"&&(_.textContent=T),f.forEach(g),this.h()},h(){i(e,"class","text-5xl mb-4"),i(n,"class","text-xl font-bold text-spore-dark mb-2"),i(a,"class","text-spore-steel mb-6"),i(_,"class","bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 transition-colors text-sm font-bold"),i(l,"class","text-center py-16 bg-spore-white rounded-xl")},m(c,f){R(c,l,f),o(l,e),o(l,v),o(l,n),o(l,s),o(l,a),o(l,b),o(l,_),I||(d=F(_,"click",r[16]),I=!0)},p:ue,d(c){c&&g(l),I=!1,d()}}}function Oe(r){let l,e=[],u=new Map,v=xe(r[5]);const n=t=>t[17].id;for(let t=0;t<v.length;t+=1){let s=Ee(r,v,t),a=n(s);u.set(a,e[t]=ye(a,s))}return{c(){l=p("div");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){l=h(t,"DIV",{class:!0});var s=C(l);for(let a=0;a<e.length;a+=1)e[a].l(s);s.forEach(g),this.h()},h(){i(l,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(t,s){R(t,l,s);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,null)},p(t,s){s&252&&(v=xe(t[5]),e=De(e,s,n,1,t,v,u,l,Ve,ye,null,Ee))},d(t){t&&g(l);for(let s=0;s<e.length;s+=1)e[s].d()}}}function Me(r){var he,_e;let l,e,u,v,n,t,s,a='<span class="text-2xl">üè¢</span>',x,b,_,T="‚úèÔ∏è",I,d,c,f,k,m,D="‚úï",y,E,N=r[17].name+"",O,G,A,B=(((he=r[17]._count)==null?void 0:he.rooms)||0)+"",Q,se,J=((_e=r[17]._count)==null?void 0:_e.rooms)!==1?"s":"",X,oe,W,H,re,K=new Date(r[17].createdAt).toLocaleDateString()+"",Y,ne,ae,pe;function Te(){return r[14](r[17])}return{c(){l=p("div"),e=p("a"),v=w(),n=p("div"),t=p("div"),s=p("div"),s.innerHTML=a,x=w(),b=p("div"),_=p("button"),_.textContent=T,I=w(),d=p("form"),c=p("input"),k=w(),m=p("button"),m.textContent=D,y=w(),E=p("h3"),O=U(N),G=w(),A=p("p"),Q=U(B),se=U(" room"),X=U(J),oe=w(),W=p("div"),H=p("span"),re=U("Created "),Y=U(K),ne=w(),this.h()},l(q){l=h(q,"DIV",{class:!0});var V=C(l);e=h(V,"A",{href:!0,class:!0}),C(e).forEach(g),v=S(V),n=h(V,"DIV",{class:!0});var M=C(n);t=h(M,"DIV",{class:!0});var j=C(t);s=h(j,"DIV",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-qmlk65"&&(s.innerHTML=a),x=S(j),b=h(j,"DIV",{class:!0});var Z=C(b);_=h(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),P(_)!=="svelte-s97alz"&&(_.textContent=T),I=S(Z),d=h(Z,"FORM",{method:!0,action:!0});var $=C(d);c=h($,"INPUT",{type:!0,name:!0}),k=S($),m=h($,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),P(m)!=="svelte-9vz145"&&(m.textContent=D),$.forEach(g),Z.forEach(g),j.forEach(g),y=S(M),E=h(M,"H3",{class:!0});var me=C(E);O=L(me,N),me.forEach(g),G=S(M),A=h(M,"P",{class:!0});var ee=C(A);Q=L(ee,B),se=L(ee," room"),X=L(ee,J),ee.forEach(g),oe=S(M),W=h(M,"DIV",{class:!0});var ve=C(W);H=h(ve,"SPAN",{class:!0});var ie=C(H);re=L(ie,"Created "),Y=L(ie,K),ie.forEach(g),ve.forEach(g),M.forEach(g),ne=S(V),V.forEach(g),this.h()},h(){i(e,"href",u="/sites/"+r[17].id),i(e,"class","absolute inset-0 z-0"),i(s,"class","w-12 h-12 bg-spore-forest/10 rounded-xl flex items-center justify-center"),i(_,"class","text-spore-steel/40 hover:text-spore-orange transition-colors opacity-0 group-hover:opacity-100"),i(c,"type","hidden"),i(c,"name","siteId"),c.value=f=r[17].id,i(m,"type","submit"),i(m,"class","text-spore-steel/40 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100"),i(d,"method","POST"),i(d,"action","?/delete"),i(b,"class","flex gap-2 pointer-events-auto"),i(t,"class","flex justify-between items-start mb-4"),i(E,"class","text-lg font-bold text-spore-dark group-hover:text-spore-forest transition-colors"),i(A,"class","text-sm text-spore-steel mt-1"),i(H,"class","text-xs text-spore-steel"),i(W,"class","mt-4 pt-4 border-t border-spore-cream/50"),i(n,"class","relative z-10 pointer-events-none"),i(l,"class","bg-spore-white rounded-xl p-6 hover:shadow-lg transition-all group relative")},m(q,V){R(q,l,V),o(l,e),o(l,v),o(l,n),o(n,t),o(t,s),o(t,x),o(t,b),o(b,_),o(b,I),o(b,d),o(d,c),o(d,k),o(d,m),o(n,y),o(n,E),o(E,O),o(n,G),o(n,A),o(A,Q),o(A,se),o(A,X),o(n,oe),o(n,W),o(W,H),o(H,re),o(H,Y),o(l,ne),ae||(pe=[F(_,"click",be(ge(Te))),F(m,"click",be(ge(r[15]))),ce(fe.call(null,d))],ae=!0)},p(q,V){var M,j;r=q,V&32&&u!==(u="/sites/"+r[17].id)&&i(e,"href",u),V&32&&f!==(f=r[17].id)&&(c.value=f),V&32&&N!==(N=r[17].name+"")&&z(O,N),V&32&&B!==(B=(((M=r[17]._count)==null?void 0:M.rooms)||0)+"")&&z(Q,B),V&32&&J!==(J=((j=r[17]._count)==null?void 0:j.rooms)!==1?"s":"")&&z(X,J),V&32&&K!==(K=new Date(r[17].createdAt).toLocaleDateString()+"")&&z(Y,K)},d(q){q&&g(l),ae=!1,de(pe)}}}function Pe(r){let l,e,u,v,n,t,s,a,x,b,_=r[2]?"SAVING...":"SAVE",T,I,d,c,f="CANCEL",k,m,D,y;return{c(){l=p("div"),e=p("form"),u=p("input"),n=w(),t=p("div"),s=p("input"),a=w(),x=p("div"),b=p("button"),T=U(_),d=w(),c=p("button"),c.textContent=f,m=w(),this.h()},l(E){l=h(E,"DIV",{class:!0});var N=C(l);e=h(N,"FORM",{method:!0,action:!0});var O=C(e);u=h(O,"INPUT",{type:!0,name:!0}),n=S(O),t=h(O,"DIV",{class:!0});var G=C(t);s=h(G,"INPUT",{type:!0,name:!0,class:!0}),G.forEach(g),a=S(O),x=h(O,"DIV",{class:!0});var A=C(x);b=h(A,"BUTTON",{type:!0,class:!0});var B=C(b);T=L(B,_),B.forEach(g),d=S(A),c=h(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),P(c)!=="svelte-vhk55s"&&(c.textContent=f),A.forEach(g),O.forEach(g),m=S(N),N.forEach(g),this.h()},h(){i(u,"type","hidden"),i(u,"name","siteId"),u.value=v=r[17].id,i(s,"type","text"),i(s,"name","name"),i(s,"class","w-full px-4 py-3 rounded-lg border border-spore-orange bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-orange text-lg font-bold"),s.required=!0,i(t,"class","mb-4"),i(b,"type","submit"),b.disabled=I=r[2]||!r[4].trim(),i(b,"class","flex-1 bg-spore-forest text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-spore-forest/90 disabled:opacity-50 transition-colors"),i(c,"type","button"),i(c,"class","px-4 py-2 rounded-lg font-bold text-sm text-spore-steel hover:bg-spore-cream transition-colors"),i(x,"class","flex gap-2"),i(e,"method","POST"),i(e,"action","?/update"),i(l,"class","bg-spore-white rounded-xl p-6 ring-2 ring-spore-orange")},m(E,N){R(E,l,N),o(l,e),o(e,u),o(e,n),o(e,t),o(t,s),le(s,r[4]),o(e,a),o(e,x),o(x,b),o(b,T),o(x,d),o(x,c),o(l,m),D||(y=[F(s,"input",r[12]),F(c,"click",r[7]),ce(k=fe.call(null,e,r[13]))],D=!0)},p(E,N){N&32&&v!==(v=E[17].id)&&(u.value=v),N&16&&s.value!==E[4]&&le(s,E[4]),N&4&&_!==(_=E[2]?"SAVING...":"SAVE")&&z(T,_),N&20&&I!==(I=E[2]||!E[4].trim())&&(b.disabled=I),k&&Ce(k.update)&&N&4&&k.update.call(null,E[13])},d(E){E&&g(l),D=!1,de(y)}}}function ye(r,l){let e,u;function v(s,a){return s[3]===s[17].id?Pe:Me}let n=v(l),t=n(l);return{key:r,first:null,c(){e=te(),t.c(),u=te(),this.h()},l(s){e=te(),t.l(s),u=te(),this.h()},h(){this.first=e},m(s,a){R(s,e,a),t.m(s,a),R(s,u,a)},p(s,a){l=s,n===(n=v(l))&&t?t.p(l,a):(t.d(1),t=n(l),t&&(t.c(),t.m(u.parentNode,u)))},d(s){s&&(g(e),g(u)),t.d(s)}}}function Ue(r){let l,e,u,v,n='<h1 class="text-4xl font-extrabold text-spore-cream tracking-tight">Sites</h1> <p class="text-spore-cream/60 mt-2 text-sm font-medium">Manage your facility locations</p>',t,s,a=r[0]?"CANCEL":"+ NEW SITE",x,b,_,T,I,d=r[0]&&ke(r);function c(m,D){return m[5].length>0?Oe:Ae}let f=c(r),k=f(r);return{c(){l=w(),e=p("div"),u=p("div"),v=p("div"),v.innerHTML=n,t=w(),s=p("button"),x=U(a),b=w(),d&&d.c(),_=w(),k.c(),this.h()},l(m){Ne("svelte-w7e4y3",document.head).forEach(g),l=S(m),e=h(m,"DIV",{class:!0});var y=C(e);u=h(y,"DIV",{class:!0});var E=C(u);v=h(E,"DIV",{"data-svelte-h":!0}),P(v)!=="svelte-ylins"&&(v.innerHTML=n),t=S(E),s=h(E,"BUTTON",{class:!0});var N=C(s);x=L(N,a),N.forEach(g),E.forEach(g),b=S(y),d&&d.l(y),_=S(y),k.l(y),y.forEach(g),this.h()},h(){document.title="Sites ‚Äî Spore CMMS",i(s,"class","bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 transition-colors text-sm font-bold tracking-wide"),i(u,"class","flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-10"),i(e,"class","max-w-7xl mx-auto px-4 py-10")},m(m,D){R(m,l,D),R(m,e,D),o(e,u),o(u,v),o(u,t),o(u,s),o(s,x),o(e,b),d&&d.m(e,null),o(e,_),k.m(e,null),T||(I=F(s,"click",r[9]),T=!0)},p(m,[D]){D&1&&a!==(a=m[0]?"CANCEL":"+ NEW SITE")&&z(x,a),m[0]?d?d.p(m,D):(d=ke(m),d.c(),d.m(e,_)):d&&(d.d(1),d=null),f===(f=c(m))&&k?k.p(m,D):(k.d(1),k=f(m),k&&(k.c(),k.m(e,null)))},i:ue,o:ue,d(m){m&&(g(l),g(e)),d&&d.d(),k.d(),T=!1,I()}}}function Le(r,l,e){let u,{data:v}=l,n=!1,t="",s=!1,a=null,x="";function b(y){e(3,a=y.id),e(4,x=y.name)}function _(){e(3,a=null),e(4,x="")}const T=()=>e(0,n=!n);function I(){t=this.value,e(1,t)}const d=()=>(e(2,s=!0),async({update:y})=>{await y(),e(2,s=!1),e(0,n=!1),e(1,t="")});function c(){x=this.value,e(4,x)}const f=()=>(e(2,s=!0),async({update:y})=>{await y(),e(2,s=!1),_()}),k=y=>b(y),m=y=>{var E;confirm("Delete this site? This will also delete all rooms and assets.")&&((E=y.currentTarget.closest("form"))==null||E.requestSubmit())},D=()=>e(0,n=!0);return r.$$set=y=>{"data"in y&&e(8,v=y.data)},r.$$.update=()=>{r.$$.dirty&256&&e(5,u=v.sites||[])},[n,t,s,a,x,u,b,_,v,T,I,d,c,f,k,m,D]}class je extends we{constructor(l){super(),Se(this,l,Le,Ue,Ie,{data:8})}}export{je as component};
