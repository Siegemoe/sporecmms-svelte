import{s as it,n as Me,c as ut,o as dt,d as ct,a as Xe,b as Ae,i as ft,r as nt}from"../chunks/scheduler.1dbefa40.js";import{S as pt,i as ht,s as T,e as n,t as ee,m as _t,d as c,f as N,c as i,a as g,k as ie,b as te,l as t,g as be,h as s,n as xe,j as me,o as _e,p as Se,q as We,r as Ye}from"../chunks/index.316c407f.js";import{e as ke,u as mt,d as vt}from"../chunks/each.5b08259c.js";import{w as gt}from"../chunks/websocket.9bdac6e2.js";import{e as Le}from"../chunks/forms.d1ef4f5c.js";import{p as bt}from"../chunks/stores.ff84b20e.js";function Je(r,e,l){const o=r.slice();return o[20]=e[l],o}function Qe(r,e,l){const o=r.slice();return o[23]=e[l],o}function Ze(r,e,l){const o=r.slice();return o[26]=e[l],o}function $e(r,e,l){const o=r.slice();return o[29]=e[l],o}function et(r){let e,l;return{c(){e=n("span"),l=ee(r[5]),this.h()},l(o){e=i(o,"SPAN",{class:!0,role:!0,"aria-live":!0});var a=g(e);l=te(a,r[5]),a.forEach(c),this.h()},h(){t(e,"class","text-sm font-medium text-spore-orange animate-pulse"),t(e,"role","status"),t(e,"aria-live","polite")},m(o,a){be(o,e,a),s(e,l)},p(o,a){a[0]&32&&me(l,o[5])},d(o){o&&c(e)}}}function tt(r){let e,l,o="Create New Work Order",a,u,b,I,h,y="Work order title",x,v,w,_,O,E="Select asset",m,C,P,Y="Select an asset...",G,q,H,R,le="Failure mode",j,k,re,J,B,K="Description",ae,W,ve,Q,z,F=r[7]?"CREATING...":"CREATE WORK ORDER",de,V,U,ce,fe,S=ke(r[1]),f=[];for(let p=0;p<S.length;p+=1)f[p]=lt($e(r,S,p));let L=ke(r[9]),A=[];for(let p=0;p<L.length;p+=1)A[p]=st(Ze(r,L,p));return{c(){e=n("div"),l=n("h2"),l.textContent=o,a=T(),u=n("form"),b=n("div"),I=n("div"),h=n("label"),h.textContent=y,x=T(),v=n("input"),w=T(),_=n("div"),O=n("label"),O.textContent=E,m=T(),C=n("select"),P=n("option"),P.textContent=Y;for(let p=0;p<f.length;p+=1)f[p].c();G=T(),q=n("div"),H=n("div"),R=n("label"),R.textContent=le,j=T(),k=n("select");for(let p=0;p<A.length;p+=1)A[p].c();re=T(),J=n("div"),B=n("label"),B.textContent=K,ae=T(),W=n("textarea"),ve=T(),Q=n("div"),z=n("button"),de=ee(F),this.h()},l(p){e=i(p,"DIV",{id:!0,class:!0,role:!0,"aria-label":!0});var M=g(e);l=i(M,"H2",{class:!0,"data-svelte-h":!0}),ie(l)!=="svelte-g1nmqu"&&(l.textContent=o),a=N(M),u=i(M,"FORM",{method:!0,action:!0,class:!0});var d=g(u);b=i(d,"DIV",{class:!0});var X=g(b);I=i(X,"DIV",{});var ue=g(I);h=i(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(h)!=="svelte-x2u6dh"&&(h.textContent=y),x=N(ue),v=i(ue,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0,"aria-required":!0}),ue.forEach(c),w=N(X),_=i(X,"DIV",{});var se=g(_);O=i(se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(O)!=="svelte-14tgw1s"&&(O.textContent=E),m=N(se),C=i(se,"SELECT",{id:!0,name:!0,class:!0,"aria-required":!0});var pe=g(C);P=i(pe,"OPTION",{"data-svelte-h":!0}),ie(P)!=="svelte-emdbtv"&&(P.textContent=Y);for(let he=0;he<f.length;he+=1)f[he].l(pe);pe.forEach(c),se.forEach(c),X.forEach(c),G=N(d),q=i(d,"DIV",{class:!0});var Ee=g(q);H=i(Ee,"DIV",{});var oe=g(H);R=i(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(R)!=="svelte-9dse4j"&&(R.textContent=le),j=N(oe),k=i(oe,"SELECT",{id:!0,name:!0,class:!0});var Oe=g(k);for(let he=0;he<A.length;he+=1)A[he].l(Oe);Oe.forEach(c),oe.forEach(c),re=N(Ee),J=i(Ee,"DIV",{class:!0});var we=g(J);B=i(we,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(B)!=="svelte-zeyz00"&&(B.textContent=K),ae=N(we),W=i(we,"TEXTAREA",{id:!0,name:!0,placeholder:!0,rows:!0,class:!0}),g(W).forEach(c),we.forEach(c),Ee.forEach(c),ve=N(d),Q=i(d,"DIV",{class:!0});var Ce=g(Q);z=i(Ce,"BUTTON",{type:!0,class:!0,"aria-busy":!0});var Te=g(z);de=te(Te,F),Te.forEach(c),Ce.forEach(c),d.forEach(c),M.forEach(c),this.h()},h(){t(l,"class","text-lg font-bold text-spore-dark mb-4"),t(h,"for","wo-title"),t(h,"class","sr-only"),t(v,"type","text"),t(v,"id","wo-title"),t(v,"name","title"),t(v,"placeholder","Work order title"),t(v,"class","w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange"),v.required=!0,t(v,"aria-required","true"),t(O,"for","wo-asset"),t(O,"class","sr-only"),P.__value="",_e(P,P.__value),t(C,"id","wo-asset"),t(C,"name","assetId"),t(C,"class","w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-orange"),C.required=!0,t(C,"aria-required","true"),r[8].assetId===void 0&&Xe(()=>r[13].call(C)),t(b,"class","grid grid-cols-1 sm:grid-cols-2 gap-4"),t(R,"for","wo-failure"),t(R,"class","sr-only"),t(k,"id","wo-failure"),t(k,"name","failureMode"),t(k,"class","w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-orange"),r[8].failureMode===void 0&&Xe(()=>r[14].call(k)),t(B,"for","wo-description"),t(B,"class","sr-only"),t(W,"id","wo-description"),t(W,"name","description"),t(W,"placeholder","Description (optional)"),t(W,"rows","1"),t(W,"class","w-full px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange resize-none"),t(J,"class","sm:col-span-2"),t(q,"class","grid grid-cols-1 sm:grid-cols-3 gap-4"),t(z,"type","submit"),z.disabled=V=r[7]||!r[8].title.trim()||!r[8].assetId,t(z,"class","bg-spore-forest text-white px-8 py-3 rounded-lg font-bold text-sm tracking-wide hover:bg-spore-forest/90 focus:outline-none focus:ring-2 focus:ring-spore-forest focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),t(z,"aria-busy",r[7]),t(Q,"class","flex justify-end"),t(u,"method","POST"),t(u,"action","?/create"),t(u,"class","space-y-4"),t(e,"id","create-form"),t(e,"class","bg-spore-white rounded-xl p-6 mb-8"),t(e,"role","region"),t(e,"aria-label","Create work order form")},m(p,M){be(p,e,M),s(e,l),s(e,a),s(e,u),s(u,b),s(b,I),s(I,h),s(I,x),s(I,v),_e(v,r[8].title),s(b,w),s(b,_),s(_,O),s(_,m),s(_,C),s(C,P);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(C,null);Se(C,r[8].assetId,!0),s(u,G),s(u,q),s(q,H),s(H,R),s(H,j),s(H,k);for(let d=0;d<A.length;d+=1)A[d]&&A[d].m(k,null);Se(k,r[8].failureMode,!0),s(q,re),s(q,J),s(J,B),s(J,ae),s(J,W),_e(W,r[8].description),s(u,ve),s(u,Q),s(Q,z),s(z,de),ce||(fe=[xe(v,"input",r[12]),xe(C,"change",r[13]),xe(k,"change",r[14]),xe(W,"input",r[15]),Ae(U=Le.call(null,u,r[16]))],ce=!0)},p(p,M){if(M[0]&258&&v.value!==p[8].title&&_e(v,p[8].title),M[0]&2){S=ke(p[1]);let d;for(d=0;d<S.length;d+=1){const X=$e(p,S,d);f[d]?f[d].p(X,M):(f[d]=lt(X),f[d].c(),f[d].m(C,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=S.length}if(M[0]&258&&Se(C,p[8].assetId),M[0]&512){L=ke(p[9]);let d;for(d=0;d<L.length;d+=1){const X=Ze(p,L,d);A[d]?A[d].p(X,M):(A[d]=st(X),A[d].c(),A[d].m(k,null))}for(;d<A.length;d+=1)A[d].d(1);A.length=L.length}M[0]&258&&Se(k,p[8].failureMode),M[0]&258&&_e(W,p[8].description),M[0]&128&&F!==(F=p[7]?"CREATING...":"CREATE WORK ORDER")&&me(de,F),M[0]&386&&V!==(V=p[7]||!p[8].title.trim()||!p[8].assetId)&&(z.disabled=V),M[0]&128&&t(z,"aria-busy",p[7]),U&&ft(U.update)&&M[0]&448&&U.update.call(null,p[16])},d(p){p&&c(e),We(f,p),We(A,p),ce=!1,nt(fe)}}}function lt(r){var w,_,O;let e,l=r[29].name+"",o,a,u=(((_=(w=r[29].room)==null?void 0:w.site)==null?void 0:_.name)||"Unknown")+"",b,I,h=(((O=r[29].room)==null?void 0:O.name)||"N/A")+"",y,x,v;return{c(){e=n("option"),o=ee(l),a=ee(" â€” "),b=ee(u),I=ee(", Room "),y=ee(h),x=T(),this.h()},l(E){e=i(E,"OPTION",{});var m=g(e);o=te(m,l),a=te(m," â€” "),b=te(m,u),I=te(m,", Room "),y=te(m,h),x=N(m),m.forEach(c),this.h()},h(){e.__value=v=r[29].id,_e(e,e.__value)},m(E,m){be(E,e,m),s(e,o),s(e,a),s(e,b),s(e,I),s(e,y),s(e,x)},p(E,m){var C,P,Y;m[0]&2&&l!==(l=E[29].name+"")&&me(o,l),m[0]&2&&u!==(u=(((P=(C=E[29].room)==null?void 0:C.site)==null?void 0:P.name)||"Unknown")+"")&&me(b,u),m[0]&2&&h!==(h=(((Y=E[29].room)==null?void 0:Y.name)||"N/A")+"")&&me(y,h),m[0]&2&&v!==(v=E[29].id)&&(e.__value=v,_e(e,e.__value))},d(E){E&&c(e)}}}function st(r){let e,l=r[26]+"",o;return{c(){e=n("option"),o=ee(l),this.h()},l(a){e=i(a,"OPTION",{});var u=g(e);o=te(u,l),u.forEach(c),this.h()},h(){e.__value=r[26],_e(e,e.__value)},m(a,u){be(a,e,u),s(e,o)},p:Me,d(a){a&&c(e)}}}function wt(r){let e,l,o="ðŸ“‹",a,u,b="No work orders yet",I,h,y="Create your first work order to get started",x,v,w="+ CREATE WORK ORDER",_,O;return{c(){e=n("div"),l=n("div"),l.textContent=o,a=T(),u=n("h3"),u.textContent=b,I=T(),h=n("p"),h.textContent=y,x=T(),v=n("button"),v.textContent=w,this.h()},l(E){e=i(E,"DIV",{class:!0,role:!0});var m=g(e);l=i(m,"DIV",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),ie(l)!=="svelte-idje0l"&&(l.textContent=o),a=N(m),u=i(m,"H3",{class:!0,"data-svelte-h":!0}),ie(u)!=="svelte-14qcuvf"&&(u.textContent=b),I=N(m),h=i(m,"P",{class:!0,"data-svelte-h":!0}),ie(h)!=="svelte-jrvcoi"&&(h.textContent=y),x=N(m),v=i(m,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(v)!=="svelte-19pqfzv"&&(v.textContent=w),m.forEach(c),this.h()},h(){t(l,"class","text-5xl mb-4"),t(l,"aria-hidden","true"),t(u,"class","text-xl font-bold text-spore-dark mb-2"),t(h,"class","text-spore-steel mb-6"),t(v,"class","bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 focus:outline-none focus:ring-2 focus:ring-spore-orange focus:ring-offset-2 transition-colors text-sm font-bold"),t(e,"class","text-center py-16 bg-spore-white rounded-xl"),t(e,"role","status")},m(E,m){be(E,e,m),s(e,l),s(e,a),s(e,u),s(e,I),s(e,h),s(e,x),s(e,v),_||(O=xe(v,"click",r[17]),_=!0)},p:Me,d(E){E&&c(e),_=!1,O()}}}function Et(r){let e,l,o,a,u='<tr><th scope="col" class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Title</th> <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Status</th> <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Assigned</th> <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Asset</th> <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Actions</th></tr>',b,I,h=[],y=new Map,x=ke(r[0]);const v=w=>w[20].id;for(let w=0;w<x.length;w+=1){let _=Je(r,x,w),O=v(_);y.set(O,h[w]=at(O,_))}return{c(){e=n("div"),l=n("div"),o=n("table"),a=n("thead"),a.innerHTML=u,b=T(),I=n("tbody");for(let w=0;w<h.length;w+=1)h[w].c();this.h()},l(w){e=i(w,"DIV",{class:!0});var _=g(e);l=i(_,"DIV",{class:!0});var O=g(l);o=i(O,"TABLE",{class:!0,role:!0,"aria-label":!0});var E=g(o);a=i(E,"THEAD",{class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-d57t8v"&&(a.innerHTML=u),b=N(E),I=i(E,"TBODY",{class:!0});var m=g(I);for(let C=0;C<h.length;C+=1)h[C].l(m);m.forEach(c),E.forEach(c),O.forEach(c),_.forEach(c),this.h()},h(){t(a,"class","bg-spore-dark"),t(I,"class","divide-y divide-spore-cream/50"),t(o,"class","min-w-full"),t(o,"role","table"),t(o,"aria-label","Work orders list"),t(l,"class","overflow-x-auto"),t(e,"class","bg-spore-white rounded-xl overflow-hidden")},m(w,_){be(w,e,_),s(e,l),s(l,o),s(o,a),s(o,b),s(o,I);for(let O=0;O<h.length;O+=1)h[O]&&h[O].m(I,null)},p(w,_){_[0]&5&&(x=ke(w[0]),h=mt(h,_,v,1,w,x,y,I,vt,at,null,Je))},d(w){w&&c(e);for(let _=0;_<h.length;_+=1)h[_].d()}}}function rt(r){let e,l=ot(r[23])+"",o,a;return{c(){e=n("option"),o=ee(l),this.h()},l(u){e=i(u,"OPTION",{});var b=g(e);o=te(b,l),b.forEach(c),this.h()},h(){e.__value=a=r[23].id,_e(e,e.__value)},m(u,b){be(u,e,b),s(e,o)},p(u,b){b[0]&4&&l!==(l=ot(u[23])+"")&&me(o,l),b[0]&4&&a!==(a=u[23].id)&&(e.__value=a,_e(e,e.__value))},d(u){u&&c(e)}}}function at(r,e){var Be;let l,o,a,u=e[20].title+"",b,I,h,y,x,v=e[20].status.replace("_"," ")+"",w,_,O,E,m,C,P,Y,G,q,H="Unassigned",R,le,j,k=(((Be=e[20].asset)==null?void 0:Be.name)||"N/A")+"",re,J,B,K,ae,W,ve,Q,z,F,de,V,U,ce,fe,S,f,L,A,p,M,d,X,ue,se,pe,Ee,oe,Oe,we,Ce,Te,he,qe,Ne=ke(e[2]),Z=[];for(let $=0;$<Ne.length;$+=1)Z[$]=rt(Qe(e,Ne,$));return{key:r,first:null,c(){l=n("tr"),o=n("td"),a=n("a"),b=ee(u),h=T(),y=n("td"),x=n("span"),w=ee(v),O=T(),E=n("td"),m=n("form"),C=n("input"),Y=T(),G=n("select"),q=n("option"),q.textContent=H;for(let $=0;$<Z.length;$+=1)Z[$].c();le=T(),j=n("td"),re=ee(k),J=T(),B=n("td"),K=n("form"),ae=n("input"),ve=T(),Q=n("input"),z=T(),F=n("button"),de=ee("Start"),fe=T(),S=n("form"),f=n("input"),A=T(),p=n("input"),M=T(),d=n("button"),X=ee("Complete"),Ee=T(),oe=n("a"),Oe=ee("View"),Te=T(),this.h()},l($){l=i($,"TR",{class:!0});var D=g(l);o=i(D,"TD",{class:!0});var ge=g(o);a=i(ge,"A",{href:!0,class:!0});var ne=g(a);b=te(ne,u),ne.forEach(c),ge.forEach(c),h=N(D),y=i(D,"TD",{class:!0});var Pe=g(y);x=i(Pe,"SPAN",{class:!0});var Ge=g(x);w=te(Ge,v),Ge.forEach(c),Pe.forEach(c),O=N(D),E=i(D,"TD",{class:!0});var He=g(E);m=i(He,"FORM",{method:!0,action:!0,class:!0});var Re=g(m);C=i(Re,"INPUT",{type:!0,name:!0}),Y=N(Re),G=i(Re,"SELECT",{name:!0,class:!0});var Ve=g(G);q=i(Ve,"OPTION",{"data-svelte-h":!0}),ie(q)!=="svelte-nkh85j"&&(q.textContent=H);for(let Ue=0;Ue<Z.length;Ue+=1)Z[Ue].l(Ve);Ve.forEach(c),Re.forEach(c),He.forEach(c),le=N(D),j=i(D,"TD",{class:!0});var je=g(j);re=te(je,k),je.forEach(c),J=N(D),B=i(D,"TD",{class:!0});var Ie=g(B);K=i(Ie,"FORM",{method:!0,action:!0,class:!0});var ye=g(K);ae=i(ye,"INPUT",{type:!0,name:!0}),ve=N(ye),Q=i(ye,"INPUT",{type:!0,name:!0}),z=N(ye),F=i(ye,"BUTTON",{type:!0,class:!0,title:!0,"aria-label":!0});var Fe=g(F);de=te(Fe,"Start"),Fe.forEach(c),ye.forEach(c),fe=N(Ie),S=i(Ie,"FORM",{method:!0,action:!0,class:!0});var De=g(S);f=i(De,"INPUT",{type:!0,name:!0}),A=N(De),p=i(De,"INPUT",{type:!0,name:!0}),M=N(De),d=i(De,"BUTTON",{type:!0,class:!0,title:!0,"aria-label":!0});var Ke=g(d);X=te(Ke,"Complete"),Ke.forEach(c),De.forEach(c),Ee=N(Ie),oe=i(Ie,"A",{href:!0,class:!0,title:!0});var ze=g(oe);Oe=te(ze,"View"),ze.forEach(c),Ie.forEach(c),Te=N(D),D.forEach(c),this.h()},h(){t(a,"href",I="/work-orders/"+e[20].id),t(a,"class","text-sm font-bold text-spore-dark hover:text-spore-orange transition-colors focus:outline-none focus:underline"),t(o,"class","px-6 py-4 whitespace-nowrap"),t(x,"class",_="px-3 py-1 inline-flex text-xs font-bold uppercase tracking-wide rounded-full "+(e[20].status==="COMPLETED"?"bg-spore-forest text-white":"")+" "+(e[20].status==="IN_PROGRESS"?"bg-spore-orange text-white":"")+" "+(e[20].status==="PENDING"?"bg-spore-steel text-white":"")+" "+(e[20].status==="ON_HOLD"?"bg-spore-cream text-spore-steel":"")+" "+(e[20].status==="CANCELLED"?"bg-red-600 text-white":"")),t(y,"class","px-6 py-4 whitespace-nowrap"),t(C,"type","hidden"),t(C,"name","workOrderId"),C.value=P=e[20].id,q.__value="",_e(q,q.__value),t(G,"name","assignedToId"),t(G,"class","text-sm bg-transparent border-0 text-spore-steel cursor-pointer hover:text-spore-dark focus:outline-none focus:ring-1 focus:ring-spore-orange rounded"),t(m,"method","POST"),t(m,"action","?/assign"),t(m,"class","inline"),t(E,"class","px-6 py-4 whitespace-nowrap"),t(j,"class","px-6 py-4 whitespace-nowrap text-sm text-spore-steel font-medium"),t(ae,"type","hidden"),t(ae,"name","workOrderId"),ae.value=W=e[20].id,t(Q,"type","hidden"),t(Q,"name","status"),Q.value="IN_PROGRESS",t(F,"type","submit"),t(F,"class","text-spore-orange hover:text-spore-orange/70 focus:outline-none focus:underline disabled:opacity-30 disabled:cursor-not-allowed"),F.disabled=V=e[20].status==="IN_PROGRESS",t(F,"title",U="Start working on "+e[20].title),t(F,"aria-label",ce="Start work order: "+e[20].title),t(K,"method","POST"),t(K,"action","?/updateStatus"),t(K,"class","inline"),t(f,"type","hidden"),t(f,"name","workOrderId"),f.value=L=e[20].id,t(p,"type","hidden"),t(p,"name","status"),p.value="COMPLETED",t(d,"type","submit"),t(d,"class","text-spore-forest hover:text-spore-forest/70 focus:outline-none focus:underline disabled:opacity-30 disabled:cursor-not-allowed"),d.disabled=ue=e[20].status==="COMPLETED",t(d,"title",se="Mark "+e[20].title+" as completed"),t(d,"aria-label",pe="Complete work order: "+e[20].title),t(S,"method","POST"),t(S,"action","?/updateStatus"),t(S,"class","inline"),t(oe,"href",we="/work-orders/"+e[20].id),t(oe,"class","text-spore-steel hover:text-spore-dark focus:outline-none focus:underline"),t(oe,"title",Ce="View details for "+e[20].title),t(B,"class","px-6 py-4 whitespace-nowrap text-sm font-bold space-x-4"),t(l,"class","hover:bg-spore-cream/20 transition-colors"),this.first=l},m($,D){be($,l,D),s(l,o),s(o,a),s(a,b),s(l,h),s(l,y),s(y,x),s(x,w),s(l,O),s(l,E),s(E,m),s(m,C),s(m,Y),s(m,G),s(G,q);for(let ge=0;ge<Z.length;ge+=1)Z[ge]&&Z[ge].m(G,null);Se(G,e[20].assignedToId||""),s(l,le),s(l,j),s(j,re),s(l,J),s(l,B),s(B,K),s(K,ae),s(K,ve),s(K,Q),s(K,z),s(K,F),s(F,de),s(B,fe),s(B,S),s(S,f),s(S,A),s(S,p),s(S,M),s(S,d),s(d,X),s(B,Ee),s(B,oe),s(oe,Oe),s(l,Te),he||(qe=[xe(G,"change",Ct),Ae(Le.call(null,m)),Ae(Le.call(null,K)),Ae(Le.call(null,S))],he=!0)},p($,D){var ge;if(e=$,D[0]&1&&u!==(u=e[20].title+"")&&me(b,u),D[0]&5&&I!==(I="/work-orders/"+e[20].id)&&t(a,"href",I),D[0]&1&&v!==(v=e[20].status.replace("_"," ")+"")&&me(w,v),D[0]&5&&_!==(_="px-3 py-1 inline-flex text-xs font-bold uppercase tracking-wide rounded-full "+(e[20].status==="COMPLETED"?"bg-spore-forest text-white":"")+" "+(e[20].status==="IN_PROGRESS"?"bg-spore-orange text-white":"")+" "+(e[20].status==="PENDING"?"bg-spore-steel text-white":"")+" "+(e[20].status==="ON_HOLD"?"bg-spore-cream text-spore-steel":"")+" "+(e[20].status==="CANCELLED"?"bg-red-600 text-white":""))&&t(x,"class",_),D[0]&5&&P!==(P=e[20].id)&&(C.value=P),D[0]&4){Ne=ke(e[2]);let ne;for(ne=0;ne<Ne.length;ne+=1){const Pe=Qe(e,Ne,ne);Z[ne]?Z[ne].p(Pe,D):(Z[ne]=rt(Pe),Z[ne].c(),Z[ne].m(G,null))}for(;ne<Z.length;ne+=1)Z[ne].d(1);Z.length=Ne.length}D[0]&5&&R!==(R=e[20].assignedToId||"")&&Se(G,e[20].assignedToId||""),D[0]&1&&k!==(k=(((ge=e[20].asset)==null?void 0:ge.name)||"N/A")+"")&&me(re,k),D[0]&5&&W!==(W=e[20].id)&&(ae.value=W),D[0]&5&&V!==(V=e[20].status==="IN_PROGRESS")&&(F.disabled=V),D[0]&5&&U!==(U="Start working on "+e[20].title)&&t(F,"title",U),D[0]&5&&ce!==(ce="Start work order: "+e[20].title)&&t(F,"aria-label",ce),D[0]&5&&L!==(L=e[20].id)&&(f.value=L),D[0]&5&&ue!==(ue=e[20].status==="COMPLETED")&&(d.disabled=ue),D[0]&5&&se!==(se="Mark "+e[20].title+" as completed")&&t(d,"title",se),D[0]&5&&pe!==(pe="Complete work order: "+e[20].title)&&t(d,"aria-label",pe),D[0]&5&&we!==(we="/work-orders/"+e[20].id)&&t(oe,"href",we),D[0]&5&&Ce!==(Ce="View details for "+e[20].title)&&t(oe,"title",Ce)},d($){$&&c(l),We(Z,$),he=!1,nt(qe)}}}function kt(r){let e,l,o,a,u,b="Work Orders",I,h,y,x,v,w,_=r[4]?"Live updates enabled":"Connecting...",O,E,m,C,P,Y=r[6]?"CANCEL":"+ NEW WORK ORDER",G,q,H,R,le="All",j,k,re,J,B,K,ae,W,ve="My Work Orders",Q,z,F,de,V=r[5]&&et(r),U=r[6]&&tt(r);function ce(f,L){return f[0]&&f[0].length>0?Et:wt}let fe=ce(r),S=fe(r);return{c(){e=T(),l=n("div"),o=n("div"),a=n("div"),u=n("h1"),u.textContent=b,I=T(),h=n("div"),y=n("span"),x=n("span"),w=T(),O=ee(_),m=T(),V&&V.c(),C=T(),P=n("button"),G=ee(Y),q=T(),H=n("div"),R=n("span"),R.textContent=le,j=T(),k=n("a"),re=n("span"),ae=T(),W=n("span"),W.textContent=ve,Q=T(),U&&U.c(),z=T(),S.c(),this.h()},l(f){_t("svelte-178cqdl",document.head).forEach(c),e=N(f),l=i(f,"DIV",{class:!0});var A=g(l);o=i(A,"DIV",{class:!0});var p=g(o);a=i(p,"DIV",{});var M=g(a);u=i(M,"H1",{class:!0,"data-svelte-h":!0}),ie(u)!=="svelte-hmu04k"&&(u.textContent=b),I=N(M),h=i(M,"DIV",{class:!0});var d=g(h);y=i(d,"SPAN",{class:!0,role:!0,"aria-live":!0});var X=g(y);x=i(X,"SPAN",{class:!0,"aria-hidden":!0}),g(x).forEach(c),w=N(X),O=te(X,_),X.forEach(c),m=N(d),V&&V.l(d),d.forEach(c),M.forEach(c),C=N(p),P=i(p,"BUTTON",{class:!0,"aria-expanded":!0,"aria-controls":!0});var ue=g(P);G=te(ue,Y),ue.forEach(c),p.forEach(c),q=N(A),H=i(A,"DIV",{class:!0});var se=g(H);R=i(se,"SPAN",{class:!0,"data-svelte-h":!0}),ie(R)!=="svelte-snu8mb"&&(R.textContent=le),j=N(se),k=i(se,"A",{href:!0,class:!0,role:!0,"aria-checked":!0});var pe=g(k);re=i(pe,"SPAN",{class:!0}),g(re).forEach(c),pe.forEach(c),ae=N(se),W=i(se,"SPAN",{class:!0,"data-svelte-h":!0}),ie(W)!=="svelte-10q70yy"&&(W.textContent=ve),se.forEach(c),Q=N(A),U&&U.l(A),z=N(A),S.l(A),A.forEach(c),this.h()},h(){document.title="Work Orders â€” Spore CMMS",t(u,"class","text-4xl font-extrabold text-spore-cream tracking-tight"),t(x,"class",v="w-2 h-2 rounded-full "+(r[4]?"bg-spore-orange animate-pulse":"bg-spore-cream/30")),t(x,"aria-hidden","true"),t(y,"class",E="flex items-center gap-2 text-sm font-medium "+(r[4]?"text-spore-orange":"text-spore-cream/50")),t(y,"role","status"),t(y,"aria-live","polite"),t(h,"class","flex items-center gap-3 mt-2"),t(P,"class","bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 focus:outline-none focus:ring-2 focus:ring-spore-orange focus:ring-offset-2 focus:ring-offset-spore-steel transition-colors text-sm font-bold tracking-wide"),t(P,"aria-expanded",r[6]),t(P,"aria-controls","create-form"),t(o,"class","flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6"),t(R,"class","text-sm font-medium text-spore-cream/70"),t(re,"class",J="inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(r[3]?"translate-x-6":"translate-x-1")),t(k,"href",B=r[3]?"/work-orders":"/work-orders?my=true"),t(k,"class",K="relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(r[3]?"bg-spore-orange":"bg-spore-steel/50")),t(k,"role","switch"),t(k,"aria-checked",r[3]),t(W,"class","text-sm font-medium text-spore-cream/70"),t(H,"class","flex items-center gap-3 mb-6"),t(l,"class","max-w-7xl mx-auto px-4 py-10")},m(f,L){be(f,e,L),be(f,l,L),s(l,o),s(o,a),s(a,u),s(a,I),s(a,h),s(h,y),s(y,x),s(y,w),s(y,O),s(h,m),V&&V.m(h,null),s(o,C),s(o,P),s(P,G),s(l,q),s(l,H),s(H,R),s(H,j),s(H,k),s(k,re),s(H,ae),s(H,W),s(l,Q),U&&U.m(l,null),s(l,z),S.m(l,null),F||(de=xe(P,"click",r[11]),F=!0)},p(f,L){L[0]&16&&v!==(v="w-2 h-2 rounded-full "+(f[4]?"bg-spore-orange animate-pulse":"bg-spore-cream/30"))&&t(x,"class",v),L[0]&16&&_!==(_=f[4]?"Live updates enabled":"Connecting...")&&me(O,_),L[0]&16&&E!==(E="flex items-center gap-2 text-sm font-medium "+(f[4]?"text-spore-orange":"text-spore-cream/50"))&&t(y,"class",E),f[5]?V?V.p(f,L):(V=et(f),V.c(),V.m(h,null)):V&&(V.d(1),V=null),L[0]&64&&Y!==(Y=f[6]?"CANCEL":"+ NEW WORK ORDER")&&me(G,Y),L[0]&64&&t(P,"aria-expanded",f[6]),L[0]&8&&J!==(J="inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(f[3]?"translate-x-6":"translate-x-1"))&&t(re,"class",J),L[0]&8&&B!==(B=f[3]?"/work-orders":"/work-orders?my=true")&&t(k,"href",B),L[0]&8&&K!==(K="relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(f[3]?"bg-spore-orange":"bg-spore-steel/50"))&&t(k,"class",K),L[0]&8&&t(k,"aria-checked",f[3]),f[6]?U?U.p(f,L):(U=tt(f),U.c(),U.m(l,z)):U&&(U.d(1),U=null),fe===(fe=ce(f))&&S?S.p(f,L):(S.d(1),S=fe(f),S&&(S.c(),S.m(l,null)))},i:Me,o:Me,d(f){f&&(c(e),c(l)),V&&V.d(),U&&U.d(),S.d(),F=!1,de()}}}function ot(r){return r?r.firstName||r.lastName?[r.firstName,r.lastName].filter(Boolean).join(" "):r.email||"Unknown":"Unassigned"}const Ct=r=>{var e;return(e=r.currentTarget.form)==null?void 0:e.requestSubmit()};function xt(r,e,l){let o;ut(r,bt,R=>l(18,o=R));let{data:a}=e,u=a.workOrders||[],b=a.assets||[],I=a.users||[],h=a.myOnly||!1,y=!1,x=null,v=!1,w=!1,_={title:"",description:"",assetId:"",failureMode:"General"};dt(()=>{o.url.searchParams.get("create")==="true"&&l(6,v=!0)});const O=gt.subscribe(R=>{if(l(4,y=R.isConnected),R.messages.length>0){const le=R.messages[0];if(le.type==="WO_UPDATE"&&le.payload){const j=le.payload;l(0,u=u.map(k=>k.id===j.id?(l(5,x=`${j.title} â†’ ${j.status}`),{...k,...j}):k))}if(le.type==="WO_NEW"&&le.payload){const j=le.payload;u.some(k=>k.id===j.id)||(l(0,u=[j,...u]),l(5,x=`New: ${j.title}`))}}});ct(()=>O());const E=["General","Electrical","Plumbing","HVAC","Structural","Safety","Cosmetic","Other"],m=()=>l(6,v=!v);function C(){_.title=this.value,l(8,_),l(1,b),l(10,a)}function P(){_.assetId=Ye(this),l(8,_),l(1,b),l(10,a)}function Y(){_.failureMode=Ye(this),l(8,_),l(1,b),l(10,a)}function G(){_.description=this.value,l(8,_),l(1,b),l(10,a)}const q=()=>(l(7,w=!0),async({update:R})=>{await R(),l(7,w=!1),l(6,v=!1),l(8,_={title:"",description:"",assetId:"",failureMode:"General"})}),H=()=>l(6,v=!0);return r.$$set=R=>{"data"in R&&l(10,a=R.data)},r.$$.update=()=>{r.$$.dirty[0]&1024&&a.workOrders&&l(0,u=a.workOrders),r.$$.dirty[0]&1024&&a.assets&&l(1,b=a.assets),r.$$.dirty[0]&1024&&a.users&&l(2,I=a.users),r.$$.dirty[0]&1024&&l(3,h=a.myOnly||!1)},[u,b,I,h,y,x,v,w,_,E,a,m,C,P,Y,G,q,H]}class St extends pt{constructor(e){super(),ht(this,e,xt,kt,it,{data:10},null,[-1,-1])}}export{St as component};
