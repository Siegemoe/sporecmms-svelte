import{s as De,n as pe,a as Oe,b as fe,i as Pe,r as Ie}from"../chunks/scheduler.1dbefa40.js";import{S as Re,i as Se,e as o,s as I,t as Z,c as n,a as y,k as L,f as A,b as $,d as g,l as s,g as se,h as t,n as X,j as te,o as V,p as ie,r as Ue,v as Me}from"../chunks/index.316c407f.js";import{e as Ne,u as He,d as Le}from"../chunks/each.5b08259c.js";import{e as he}from"../chunks/forms.d1ef4f5c.js";function Ee(i,e,l){const c=i.slice();return c[14]=e[l],c}function we(i){let e,l,c="Add New User",d,h,E,a,m,N,D,v,r,b,u,T,p,_,S="Technician",P,Y="Manager",f,M="Admin",j,x,k=i[1]?"CREATING...":"CREATE USER",C,F,G,q,K;return{c(){e=o("div"),l=o("h2"),l.textContent=c,d=I(),h=o("form"),E=o("div"),a=o("input"),m=I(),N=o("input"),D=I(),v=o("div"),r=o("input"),b=I(),u=o("input"),T=I(),p=o("select"),_=o("option"),_.textContent=S,P=o("option"),P.textContent=Y,f=o("option"),f.textContent=M,j=I(),x=o("button"),C=Z(k),this.h()},l(w){e=n(w,"DIV",{class:!0});var R=y(e);l=n(R,"H2",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-ashmrl"&&(l.textContent=c),d=A(R),h=n(R,"FORM",{method:!0,action:!0,class:!0});var z=y(h);E=n(z,"DIV",{class:!0});var ee=y(E);a=n(ee,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),m=A(ee),N=n(ee,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),ee.forEach(g),D=A(z),v=n(z,"DIV",{class:!0});var B=y(v);r=n(B,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),b=A(B),u=n(B,"INPUT",{type:!0,name:!0,placeholder:!0,minlength:!0,class:!0}),T=A(B),p=n(B,"SELECT",{name:!0,class:!0});var U=y(p);_=n(U,"OPTION",{"data-svelte-h":!0}),L(_)!=="svelte-1npbobm"&&(_.textContent=S),P=n(U,"OPTION",{"data-svelte-h":!0}),L(P)!=="svelte-17d1rxs"&&(P.textContent=Y),f=n(U,"OPTION",{"data-svelte-h":!0}),L(f)!=="svelte-uoqvo8"&&(f.textContent=M),U.forEach(g),B.forEach(g),j=A(z),x=n(z,"BUTTON",{type:!0,class:!0});var J=y(x);C=$(J,k),J.forEach(g),z.forEach(g),R.forEach(g),this.h()},h(){s(l,"class","text-lg font-bold text-spore-dark mb-4"),s(a,"type","text"),s(a,"name","firstName"),s(a,"placeholder","First name"),s(a,"class","px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange"),s(N,"type","text"),s(N,"name","lastName"),s(N,"placeholder","Last name"),s(N,"class","px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange"),s(E,"class","grid grid-cols-1 sm:grid-cols-2 gap-4"),s(r,"type","email"),s(r,"name","email"),s(r,"placeholder","Email"),s(r,"class","px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange"),r.required=!0,s(u,"type","password"),s(u,"name","password"),s(u,"placeholder","Password (min 8 chars)"),s(u,"minlength","8"),s(u,"class","px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark placeholder-spore-steel/50 focus:outline-none focus:ring-2 focus:ring-spore-orange"),u.required=!0,_.__value="TECHNICIAN",V(_,_.__value),P.__value="MANAGER",V(P,P.__value),f.__value="ADMIN",V(f,f.__value),s(p,"name","role"),s(p,"class","px-4 py-3 rounded-lg border border-spore-cream bg-spore-cream/20 text-spore-dark focus:outline-none focus:ring-2 focus:ring-spore-orange"),i[2].role===void 0&&Oe(()=>i[10].call(p)),s(v,"class","grid grid-cols-1 sm:grid-cols-3 gap-4"),s(x,"type","submit"),x.disabled=F=i[1]||!i[2].email.trim()||!i[2].password,s(x,"class","bg-spore-forest text-white px-6 py-3 rounded-lg font-bold text-sm tracking-wide hover:bg-spore-forest/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),s(h,"method","POST"),s(h,"action","?/create"),s(h,"class","space-y-4"),s(e,"class","bg-spore-white rounded-xl p-6 mb-8")},m(w,R){se(w,e,R),t(e,l),t(e,d),t(e,h),t(h,E),t(E,a),V(a,i[2].firstName),t(E,m),t(E,N),V(N,i[2].lastName),t(h,D),t(h,v),t(v,r),V(r,i[2].email),t(v,b),t(v,u),V(u,i[2].password),t(v,T),t(v,p),t(p,_),t(p,P),t(p,f),ie(p,i[2].role,!0),t(h,j),t(h,x),t(x,C),q||(K=[X(a,"input",i[6]),X(N,"input",i[7]),X(r,"input",i[8]),X(u,"input",i[9]),X(p,"change",i[10]),fe(G=he.call(null,h,i[11]))],q=!0)},p(w,R){R&4&&a.value!==w[2].firstName&&V(a,w[2].firstName),R&4&&N.value!==w[2].lastName&&V(N,w[2].lastName),R&4&&r.value!==w[2].email&&V(r,w[2].email),R&4&&u.value!==w[2].password&&V(u,w[2].password),R&4&&ie(p,w[2].role),R&2&&k!==(k=w[1]?"CREATING...":"CREATE USER")&&te(C,k),R&6&&F!==(F=w[1]||!w[2].email.trim()||!w[2].password)&&(x.disabled=F),G&&Pe(G.update)&&R&7&&G.update.call(null,w[11])},d(w){w&&g(e),q=!1,Ie(K)}}}function Ve(i){let e,l,c="ðŸ‘¥",d,h,E="No users yet",a,m,N="Add team members to get started",D,v,r="+ ADD USER",b,u;return{c(){e=o("div"),l=o("div"),l.textContent=c,d=I(),h=o("h3"),h.textContent=E,a=I(),m=o("p"),m.textContent=N,D=I(),v=o("button"),v.textContent=r,this.h()},l(T){e=n(T,"DIV",{class:!0});var p=y(e);l=n(p,"DIV",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-1i6rpvs"&&(l.textContent=c),d=A(p),h=n(p,"H3",{class:!0,"data-svelte-h":!0}),L(h)!=="svelte-xk78eh"&&(h.textContent=E),a=A(p),m=n(p,"P",{class:!0,"data-svelte-h":!0}),L(m)!=="svelte-1iuc5bd"&&(m.textContent=N),D=A(p),v=n(p,"BUTTON",{class:!0,"data-svelte-h":!0}),L(v)!=="svelte-174euj2"&&(v.textContent=r),p.forEach(g),this.h()},h(){s(l,"class","text-5xl mb-4"),s(h,"class","text-xl font-bold text-spore-dark mb-2"),s(m,"class","text-spore-steel mb-6"),s(v,"class","bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 transition-colors text-sm font-bold"),s(e,"class","text-center py-16 bg-spore-white rounded-xl")},m(T,p){se(T,e,p),t(e,l),t(e,d),t(e,h),t(e,a),t(e,m),t(e,D),t(e,v),b||(u=X(v,"click",i[13]),b=!0)},p:pe,d(T){T&&g(e),b=!1,u()}}}function qe(i){let e,l,c,d,h='<tr><th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">User</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Email</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Role</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Joined</th> <th class="px-6 py-4 text-left text-xs font-bold text-spore-cream uppercase tracking-wider">Actions</th></tr>',E,a,m=[],N=new Map,D=Ne(i[3]);const v=r=>r[14].id;for(let r=0;r<D.length;r+=1){let b=Ee(i,D,r),u=v(b);N.set(u,m[r]=ke(u,b))}return{c(){e=o("div"),l=o("div"),c=o("table"),d=o("thead"),d.innerHTML=h,E=I(),a=o("tbody");for(let r=0;r<m.length;r+=1)m[r].c();this.h()},l(r){e=n(r,"DIV",{class:!0});var b=y(e);l=n(b,"DIV",{class:!0});var u=y(l);c=n(u,"TABLE",{class:!0});var T=y(c);d=n(T,"THEAD",{class:!0,"data-svelte-h":!0}),L(d)!=="svelte-12sxbb2"&&(d.innerHTML=h),E=A(T),a=n(T,"TBODY",{class:!0});var p=y(a);for(let _=0;_<m.length;_+=1)m[_].l(p);p.forEach(g),T.forEach(g),u.forEach(g),b.forEach(g),this.h()},h(){s(d,"class","bg-spore-dark"),s(a,"class","divide-y divide-spore-cream/50"),s(c,"class","min-w-full"),s(l,"class","overflow-x-auto"),s(e,"class","bg-spore-white rounded-xl overflow-hidden")},m(r,b){se(r,e,b),t(e,l),t(l,c),t(c,d),t(c,E),t(c,a);for(let u=0;u<m.length;u+=1)m[u]&&m[u].m(a,null)},p(r,b){b&8&&(D=Ne(r[3]),m=He(m,b,v,1,r,D,N,a,Le,ke,null,Ee))},d(r){r&&g(e);for(let b=0;b<m.length;b+=1)m[b].d()}}}function Te(i){let e,l="(No name)";return{c(){e=o("span"),e.textContent=l,this.h()},l(c){e=n(c,"SPAN",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-6cnpz3"&&(e.textContent=l),this.h()},h(){s(e,"class","text-spore-steel")},m(c,d){se(c,e,d)},d(c){c&&g(e)}}}function ke(i,e){let l,c,d,h=(e[14].firstName||"")+"",E,a,m=(e[14].lastName||"")+"",N,D,v,r,b=e[14].email+"",u,T,p,_,S,P,Y,f,M,j="Technician",x,k="Manager",C,F="Admin",G,q,K,w,R=new Date(e[14].createdAt).toLocaleDateString()+"",z,ee,B,U,J,ae,ue,Q,me="Delete",ce,de,_e,H=!e[14].firstName&&!e[14].lastName&&Te();function Ae(...W){return e[12](e[14],...W)}return{key:i,first:null,c(){l=o("tr"),c=o("td"),d=o("span"),E=Z(h),a=I(),N=Z(m),D=I(),H&&H.c(),v=I(),r=o("td"),u=Z(b),T=I(),p=o("td"),_=o("form"),S=o("input"),Y=I(),f=o("select"),M=o("option"),M.textContent=j,x=o("option"),x.textContent=k,C=o("option"),C.textContent=F,K=I(),w=o("td"),z=Z(R),ee=I(),B=o("td"),U=o("form"),J=o("input"),ue=I(),Q=o("button"),Q.textContent=me,ce=I(),this.h()},l(W){l=n(W,"TR",{class:!0});var O=y(l);c=n(O,"TD",{class:!0});var ve=y(c);d=n(ve,"SPAN",{class:!0});var le=y(d);E=$(le,h),a=A(le),N=$(le,m),D=A(le),H&&H.l(le),le.forEach(g),ve.forEach(g),v=A(O),r=n(O,"TD",{class:!0});var be=y(r);u=$(be,b),be.forEach(g),T=A(O),p=n(O,"TD",{class:!0});var ge=y(p);_=n(ge,"FORM",{method:!0,action:!0,class:!0});var re=y(_);S=n(re,"INPUT",{type:!0,name:!0}),Y=A(re),f=n(re,"SELECT",{name:!0,class:!0});var oe=y(f);M=n(oe,"OPTION",{"data-svelte-h":!0}),L(M)!=="svelte-1npbobm"&&(M.textContent=j),x=n(oe,"OPTION",{"data-svelte-h":!0}),L(x)!=="svelte-17d1rxs"&&(x.textContent=k),C=n(oe,"OPTION",{"data-svelte-h":!0}),L(C)!=="svelte-uoqvo8"&&(C.textContent=F),oe.forEach(g),re.forEach(g),ge.forEach(g),K=A(O),w=n(O,"TD",{class:!0});var xe=y(w);z=$(xe,R),xe.forEach(g),ee=A(O),B=n(O,"TD",{class:!0});var Ce=y(B);U=n(Ce,"FORM",{method:!0,action:!0,class:!0});var ne=y(U);J=n(ne,"INPUT",{type:!0,name:!0}),ue=A(ne),Q=n(ne,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),L(Q)!=="svelte-gvkpdz"&&(Q.textContent=me),ne.forEach(g),Ce.forEach(g),ce=A(O),O.forEach(g),this.h()},h(){s(d,"class","text-sm font-bold text-spore-dark"),s(c,"class","px-6 py-4 whitespace-nowrap"),s(r,"class","px-6 py-4 whitespace-nowrap text-sm text-spore-steel"),s(S,"type","hidden"),s(S,"name","userId"),S.value=P=e[14].id,M.__value="TECHNICIAN",V(M,M.__value),x.__value="MANAGER",V(x,x.__value),C.__value="ADMIN",V(C,C.__value),s(f,"name","role"),s(f,"class",q="px-2 py-1 text-xs font-bold uppercase rounded-full border-0 cursor-pointer "+ye(e[14].role)),s(_,"method","POST"),s(_,"action","?/updateRole"),s(_,"class","inline"),s(p,"class","px-6 py-4 whitespace-nowrap"),s(w,"class","px-6 py-4 whitespace-nowrap text-sm text-spore-steel"),s(J,"type","hidden"),s(J,"name","userId"),J.value=ae=e[14].id,s(Q,"type","submit"),s(Q,"class","text-red-500 hover:text-red-400 font-bold transition-colors"),s(U,"method","POST"),s(U,"action","?/delete"),s(U,"class","inline"),s(B,"class","px-6 py-4 whitespace-nowrap text-sm"),s(l,"class","hover:bg-spore-cream/20 transition-colors"),this.first=l},m(W,O){se(W,l,O),t(l,c),t(c,d),t(d,E),t(d,a),t(d,N),t(d,D),H&&H.m(d,null),t(l,v),t(l,r),t(r,u),t(l,T),t(l,p),t(p,_),t(_,S),t(_,Y),t(_,f),t(f,M),t(f,x),t(f,C),ie(f,e[14].role),t(l,K),t(l,w),t(w,z),t(l,ee),t(l,B),t(B,U),t(U,J),t(U,ue),t(U,Q),t(l,ce),de||(_e=[X(f,"change",Fe),fe(he.call(null,_)),X(Q,"click",Me(Ae)),fe(he.call(null,U))],de=!0)},p(W,O){e=W,O&8&&h!==(h=(e[14].firstName||"")+"")&&te(E,h),O&8&&m!==(m=(e[14].lastName||"")+"")&&te(N,m),!e[14].firstName&&!e[14].lastName?H||(H=Te(),H.c(),H.m(d,null)):H&&(H.d(1),H=null),O&8&&b!==(b=e[14].email+"")&&te(u,b),O&8&&P!==(P=e[14].id)&&(S.value=P),O&8&&G!==(G=e[14].role)&&ie(f,e[14].role),O&8&&q!==(q="px-2 py-1 text-xs font-bold uppercase rounded-full border-0 cursor-pointer "+ye(e[14].role))&&s(f,"class",q),O&8&&R!==(R=new Date(e[14].createdAt).toLocaleDateString()+"")&&te(z,R),O&8&&ae!==(ae=e[14].id)&&(J.value=ae)},d(W){W&&g(l),H&&H.d(),de=!1,Ie(_e)}}}function Be(i){let e,l,c,d,h="Users",E,a,m=i[3].length+"",N,D,v=i[3].length!==1?"s":"",r,b,u,T=i[0]?"CANCEL":"+ ADD USER",p,_,S,P,Y,f=i[0]&&we(i);function M(k,C){return k[3].length>0?qe:Ve}let j=M(i),x=j(i);return{c(){e=o("div"),l=o("div"),c=o("div"),d=o("h1"),d.textContent=h,E=I(),a=o("p"),N=Z(m),D=Z(" team member"),r=Z(v),b=I(),u=o("button"),p=Z(T),_=I(),f&&f.c(),S=I(),x.c(),this.h()},l(k){e=n(k,"DIV",{class:!0});var C=y(e);l=n(C,"DIV",{class:!0});var F=y(l);c=n(F,"DIV",{});var G=y(c);d=n(G,"H1",{class:!0,"data-svelte-h":!0}),L(d)!=="svelte-t6iemi"&&(d.textContent=h),E=A(G),a=n(G,"P",{class:!0});var q=y(a);N=$(q,m),D=$(q," team member"),r=$(q,v),q.forEach(g),G.forEach(g),b=A(F),u=n(F,"BUTTON",{class:!0});var K=y(u);p=$(K,T),K.forEach(g),F.forEach(g),_=A(C),f&&f.l(C),S=A(C),x.l(C),C.forEach(g),this.h()},h(){s(d,"class","text-4xl font-extrabold text-spore-cream tracking-tight"),s(a,"class","text-spore-cream/60 mt-2 text-sm font-medium"),s(u,"class","bg-spore-orange text-white px-6 py-3 rounded-xl hover:bg-spore-orange/90 transition-colors text-sm font-bold tracking-wide"),s(l,"class","flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-10"),s(e,"class","max-w-7xl mx-auto px-4 py-10")},m(k,C){se(k,e,C),t(e,l),t(l,c),t(c,d),t(c,E),t(c,a),t(a,N),t(a,D),t(a,r),t(l,b),t(l,u),t(u,p),t(e,_),f&&f.m(e,null),t(e,S),x.m(e,null),P||(Y=X(u,"click",i[5]),P=!0)},p(k,[C]){C&8&&m!==(m=k[3].length+"")&&te(N,m),C&8&&v!==(v=k[3].length!==1?"s":"")&&te(r,v),C&1&&T!==(T=k[0]?"CANCEL":"+ ADD USER")&&te(p,T),k[0]?f?f.p(k,C):(f=we(k),f.c(),f.m(e,S)):f&&(f.d(1),f=null),j===(j=M(k))&&x?x.p(k,C):(x.d(1),x=j(k),x&&(x.c(),x.m(e,null)))},i:pe,o:pe,d(k){k&&g(e),f&&f.d(),x.d(),P=!1,Y()}}}function ye(i){switch(i){case"ADMIN":return"bg-spore-orange text-white";case"MANAGER":return"bg-spore-forest text-white";default:return"bg-spore-steel text-white"}}const Fe=i=>{var e;return(e=i.currentTarget.form)==null?void 0:e.requestSubmit()};function Ge(i,e,l){let c,{data:d}=e,h=!1,E=!1,a={email:"",firstName:"",lastName:"",role:"TECHNICIAN",password:""};const m=()=>l(0,h=!h);function N(){a.firstName=this.value,l(2,a)}function D(){a.lastName=this.value,l(2,a)}function v(){a.email=this.value,l(2,a)}function r(){a.password=this.value,l(2,a)}function b(){a.role=Ue(this),l(2,a)}const u=()=>(l(1,E=!0),async({update:_,result:S})=>{await _(),l(1,E=!1),S.type==="success"&&(l(0,h=!1),l(2,a={email:"",firstName:"",lastName:"",role:"TECHNICIAN",password:""}))}),T=(_,S)=>{var P;confirm(`Delete ${_.email}? This cannot be undone.`)&&((P=S.currentTarget.closest("form"))==null||P.requestSubmit())},p=()=>l(0,h=!0);return i.$$set=_=>{"data"in _&&l(4,d=_.data)},i.$$.update=()=>{i.$$.dirty&16&&l(3,c=d.users||[])},[h,E,a,c,d,m,N,D,v,r,b,u,T,p]}class Ke extends Re{constructor(e){super(),Se(this,e,Ge,Be,De,{data:4})}}export{Ke as component};
